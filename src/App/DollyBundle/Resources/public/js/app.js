this.Templates=this.Templates||{},this.Templates.cart__item=Handlebars.template({1:function(a,b,c,d){var e;return'<span class="cart__discounted">'+this.escapeExpression((e=null!=(e=b.discounted||(null!=a?a.discounted:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"discounted",hash:{},data:d}):e))+" kr</span>"},3:function(a,b,c,d){var e;return'<a href="'+this.escapeExpression((e=null!=(e=b.url||(null!=a?a.url:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"url",hash:{},data:d}):e))+'">'},5:function(a,b,c,d){var e;return this.escapeExpression((e=null!=(e=b.name||(null!=a?a.name:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"name",hash:{},data:d}):e))},7:function(a,b,c,d){var e;return this.escapeExpression(this.lambda(null!=(e=null!=a?a.base:a)?e.name:e,a))},9:function(a,b,c,d){return"</a>"},11:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return"	<p><strong>"+g(f(null!=(e=null!=a?a.base:a)?e.name:e,a))+":</strong> "+g(f(null!=(e=null!=(e=null!=a?a.base:a)?e.description:e)?e.text:e,a))+"</p>\n	<p><strong>"+g(f(null!=(e=null!=a?a.extension:a)?e.name:e,a))+":</strong> "+g(f(null!=(e=null!=(e=null!=a?a.extension:a)?e.description:e)?e.text:e,a))+"</p>\n"},13:function(a,b,c,d){var e;return"	<p>"+this.escapeExpression(this.lambda(null!=(e=null!=(e=null!=a?a.base:a)?e.description:e)?e.text:e,a))+"</p>\n"},15:function(a,b,c,d){var e,f;return'<div class="quantity-picker '+(null!=(e=b["if"].call(a,null!=a?a.removable:a,{name:"if",hash:{},fn:this.program(16,d,0),inverse:this.noop,data:d}))?e:"")+'">\n	<button class="quantity-picker__controller quantity-picker__controller--remove" data-alert="Er du sikker på at du vil fjerne produktet fra handlelisten?">x</button>\n	<button class="quantity-picker__controller quantity-picker__controller--minus">-</button>\n	<input type="number" min="1" class="quantity-picker__input" value="'+this.escapeExpression((f=null!=(f=b.quantity||(null!=a?a.quantity:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"quantity",hash:{},data:d}):f))+'">\n	<button class="quantity-picker__controller quantity-picker__controller--plus">+</button>\n</div>\n'},16:function(a,b,c,d){return"quantity-picker--removable"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f;return'<p class="cart__price">'+(null!=(e=b["if"].call(a,null!=a?a.discounted:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+this.escapeExpression((f=null!=(f=b.price||(null!=a?a.price:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"price",hash:{},data:d}):f))+' kr</p>\n\n<h3 class="cart__title">\n	'+(null!=(e=b["if"].call(a,null!=a?a.url:a,{name:"if",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:"")+"\n		"+(null!=(e=b["if"].call(a,null!=a?a.name:a,{name:"if",hash:{},fn:this.program(5,d,0),inverse:this.program(7,d,0),data:d}))?e:"")+"\n	"+(null!=(e=b["if"].call(a,null!=a?a.url:a,{name:"if",hash:{},fn:this.program(9,d,0),inverse:this.noop,data:d}))?e:"")+"\n</h3>\n\n"+(null!=(e=b["if"].call(a,null!=a?a.extension:a,{name:"if",hash:{},fn:this.program(11,d,0),inverse:this.program(13,d,0),data:d}))?e:"")+"\n"+(null!=(e=b["if"].call(a,null!=a?a.quantity:a,{name:"if",hash:{},fn:this.program(15,d,0),inverse:this.noop,data:d}))?e:"")},useData:!0}),this.Templates.cart__itempayment=Handlebars.template({1:function(a,b,c,d){var e;return this.escapeExpression((e=null!=(e=b.name||(null!=a?a.name:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"name",hash:{},data:d}):e))},3:function(a,b,c,d){var e;return this.escapeExpression(this.lambda(null!=(e=null!=a?a.base:a)?e.name:e,a))},5:function(a,b,c,d){var e;return'<a href="'+this.escapeExpression((e=null!=(e=b.url||(null!=a?a.url:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"url",hash:{},data:d}):e))+'">'},7:function(a,b,c,d){return"</a>"},9:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return"		<p><strong>"+g(f(null!=(e=null!=a?a.base:a)?e.name:e,a))+":</strong> "+g(f(null!=(e=null!=(e=null!=a?a.base:a)?e.description:e)?e.text:e,a))+"</p>\n		<p><strong>"+g(f(null!=(e=null!=a?a.extension:a)?e.name:e,a))+":</strong> "+g(f(null!=(e=null!=(e=null!=a?a.extension:a)?e.description:e)?e.text:e,a))+"</p>\n"},11:function(a,b,c,d){var e;return"		<p>"+this.escapeExpression(this.lambda(null!=(e=null!=(e=null!=a?a.base:a)?e.description:e)?e.text:e,a))+"</p>\n"},13:function(a,b,c,d){var e;return'<p class="cart__discounted">'+this.escapeExpression((e=null!=(e=b.discounted||(null!=a?a.discounted:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"discounted",hash:{},data:d}):e))+" kr</p>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=this.escapeExpression;return'<td>\n	<img class="cart__image" src="'+g(this.lambda(null!=(e=null!=a?a.base:a)?e.image:e,a))+'" alt="'+(null!=(e=b["if"].call(a,null!=a?a.name:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.program(3,d,0),data:d}))?e:"")+'">\n</td>\n<td>\n	<h3 class="cart__title test">\n		'+(null!=(e=b["if"].call(a,null!=a?a.url:a,{name:"if",hash:{},fn:this.program(5,d,0),inverse:this.noop,data:d}))?e:"")+"\n			"+(null!=(e=b["if"].call(a,null!=a?a.name:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.program(3,d,0),data:d}))?e:"")+"\n		"+(null!=(e=b["if"].call(a,null!=a?a.url:a,{name:"if",hash:{},fn:this.program(7,d,0),inverse:this.noop,data:d}))?e:"")+"\n	</h3>\n\n"+(null!=(e=b["if"].call(a,null!=a?a.extension:a,{name:"if",hash:{},fn:this.program(9,d,0),inverse:this.program(11,d,0),data:d}))?e:"")+'\n</td>\n<td class="cart__prices">\n	'+(null!=(e=b["if"].call(a,null!=a?a.discounted:a,{name:"if",hash:{},fn:this.program(13,d,0),inverse:this.noop,data:d}))?e:"")+"\n	<p>"+g((f=null!=(f=b.price||(null!=a?a.price:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"price",hash:{},data:d}):f))+" kr</p>\n</td>"},useData:!0}),this.Templates.cart__row=Handlebars.template({1:function(a,b,c,d){var e;return this.escapeExpression((e=null!=(e=b.name||(null!=a?a.name:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"name",hash:{},data:d}):e))},3:function(a,b,c,d){var e;return this.escapeExpression(this.lambda(null!=(e=null!=a?a.base:a)?e.name:e,a))},5:function(a,b,c,d){var e;return'<a href="'+this.escapeExpression((e=null!=(e=b.url||(null!=a?a.url:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"url",hash:{},data:d}):e))+'">'},7:function(a,b,c,d){return"</a>"},9:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return"		<p><strong>"+g(f(null!=(e=null!=a?a.base:a)?e.name:e,a))+":</strong> "+g(f(null!=(e=null!=(e=null!=a?a.base:a)?e.description:e)?e.text:e,a))+"</p>\n		<p><strong>"+g(f(null!=(e=null!=a?a.extension:a)?e.name:e,a))+":</strong> "+g(f(null!=(e=null!=(e=null!=a?a.extension:a)?e.description:e)?e.text:e,a))+"</p>\n"},11:function(a,b,c,d){var e;return"		<p>"+this.escapeExpression(this.lambda(null!=(e=null!=(e=null!=a?a.base:a)?e.description:e)?e.text:e,a))+"</p>\n"},13:function(a,b,c,d){var e;return'	<div class="quantity-picker">\n		<button class="quantity-picker__controller quantity-picker__controller--remove" data-alert="Er du sikker på at du vil fjerne produktet fra handlelisten?">x</button>\n		<button class="quantity-picker__controller quantity-picker__controller--minus">-</button>\n		<input type="number" min="1" class="quantity-picker__input" value="'+this.escapeExpression((e=null!=(e=b.quantity||(null!=a?a.quantity:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"quantity",hash:{},data:d}):e))+'">\n		<button class="quantity-picker__controller quantity-picker__controller--plus">+</button>\n	</div>\n'},15:function(a,b,c,d){var e;return'<p class="cart__discounted">'+this.escapeExpression((e=null!=(e=b.discounted||(null!=a?a.discounted:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"discounted",hash:{},data:d}):e))+" kr</p>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=this.escapeExpression;return'<td>\n	<img class="cart__image" src="'+g(this.lambda(null!=(e=null!=a?a.base:a)?e.image:e,a))+'" alt="'+(null!=(e=b["if"].call(a,null!=a?a.name:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.program(3,d,0),data:d}))?e:"")+'">\n</td>\n<td>\n	<h3 class="cart__title test">\n		'+(null!=(e=b["if"].call(a,null!=a?a.url:a,{name:"if",hash:{},fn:this.program(5,d,0),inverse:this.noop,data:d}))?e:"")+"\n			"+(null!=(e=b["if"].call(a,null!=a?a.name:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.program(3,d,0),data:d}))?e:"")+"\n		"+(null!=(e=b["if"].call(a,null!=a?a.url:a,{name:"if",hash:{},fn:this.program(7,d,0),inverse:this.noop,data:d}))?e:"")+"\n	</h3>\n\n"+(null!=(e=b["if"].call(a,null!=a?a.extension:a,{name:"if",hash:{},fn:this.program(9,d,0),inverse:this.program(11,d,0),data:d}))?e:"")+"\n</td>\n<td>\n"+(null!=(e=b["if"].call(a,null!=a?a.quantity:a,{name:"if",hash:{},fn:this.program(13,d,0),inverse:this.noop,data:d}))?e:"")+'</td>\n<td class="cart__prices">\n	'+(null!=(e=b["if"].call(a,null!=a?a.discounted:a,{name:"if",hash:{},fn:this.program(15,d,0),inverse:this.noop,data:d}))?e:"")+"\n	<p>"+g((f=null!=(f=b.price||(null!=a?a.price:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"price",hash:{},data:d}):f))+" kr</p>\n</td>"},useData:!0}),this.Templates.customize__category=Handlebars.template({1:function(a,b,c,d){return" is-open "},3:function(a,b,c,d){return" closed "},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'<li>\n	<a href="#" class="list-menu__link list-menu__link--active '+(null!=(e=b["if"].call(a,null!=a?a.open:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'" data-expand="#custom-'+i((f=null!=(f=b.os_category_id||(null!=a?a.os_category_id:a))?f:g,typeof f===h?f.call(a,{name:"os_category_id",hash:{},data:d}):f))+"-"+i((f=null!=(f=b.cid||(null!=a?a.cid:a))?f:g,typeof f===h?f.call(a,{name:"cid",hash:{},data:d}):f))+'" id="'+i((f=null!=(f=b.dropdownId||(null!=a?a.dropdownId:a))?f:g,typeof f===h?f.call(a,{name:"dropdownId",hash:{},data:d}):f))+'">'+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+'</a>\n	<div class="dropdown '+(null!=(e=b.unless.call(a,null!=a?a.open:a,{name:"unless",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:"")+'" id="custom-'+i((f=null!=(f=b.os_category_id||(null!=a?a.os_category_id:a))?f:g,typeof f===h?f.call(a,{name:"os_category_id",hash:{},data:d}):f))+"-"+i((f=null!=(f=b.cid||(null!=a?a.cid:a))?f:g,typeof f===h?f.call(a,{name:"cid",hash:{},data:d}):f))+'"></div>\n</li>\n'},useData:!0}),this.Templates.customize__ingredient=Handlebars.template({1:function(a,b,c,d){var e,f,g=this.escapeExpression;return'data-radio-open="#custom-'+g(this.lambda(null!=(e=null!=a?a.extra:a)?e.os_product_id:e,a))+"-"+g((f=null!=(f=b.cid||(null!=a?a.cid:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"cid",hash:{},data:d}):f))+'"'},3:function(a,b,c,d){return"checked"},5:function(a,b,c,d){var e,f,g=this.lambda,h=this.escapeExpression,i=b.helperMissing,j="function";return'<div id="custom-'+h(g(null!=(e=null!=a?a.extra:a)?e.os_product_id:e,a))+"-"+h((f=null!=(f=b.cid||(null!=a?a.cid:a))?f:i,typeof f===j?f.call(a,{name:"cid",hash:{},data:d}):f))+'" class="form-group hidden">\n	<div class="form-group__field form-group__field--checkbox form-group__sub">\n		<input type="checkbox" name="extra'+h(g(null!=(e=null!=a?a.extra:a)?e.os_product_id:e,a))+'" id="extra'+h(g(null!=(e=null!=a?a.extra:a)?e.os_product_id:e,a))+"-"+h((f=null!=(f=b.cid||(null!=a?a.cid:a))?f:i,typeof f===j?f.call(a,{name:"cid",hash:{},data:d}):f))+'" data-ingredient-parent="'+h((f=null!=(f=b.os_product_id||(null!=a?a.os_product_id:a))?f:i,typeof f===j?f.call(a,{name:"os_product_id",hash:{},data:d}):f))+'" value="1" '+(null!=(e=b["if"].call(a,null!=(e=null!=a?a.extra:a)?e.included:e,{name:"if",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:"")+'>\n		<label for="extra'+h(g(null!=(e=null!=a?a.extra:a)?e.os_product_id:e,a))+"-"+h((f=null!=(f=b.cid||(null!=a?a.cid:a))?f:i,typeof f===j?f.call(a,{name:"cid",hash:{},data:d}):f))+'">Ekstra</label>\n	</div>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'<div class="form-group">\n	<div class="form-group__field form-group__field--checkbox">\n		<input type="checkbox" name="main'+i((f=null!=(f=b.os_product_id||(null!=a?a.os_product_id:a))?f:g,typeof f===h?f.call(a,{name:"os_product_id",hash:{},data:d}):f))+'" id="main'+i((f=null!=(f=b.os_product_id||(null!=a?a.os_product_id:a))?f:g,typeof f===h?f.call(a,{name:"os_product_id",hash:{},data:d}):f))+"-"+i((f=null!=(f=b.cid||(null!=a?a.cid:a))?f:g,typeof f===h?f.call(a,{name:"cid",hash:{},data:d}):f))+'" value="1" '+(null!=(e=b["if"].call(a,null!=a?a.extra:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+" "+(null!=(e=b["if"].call(a,null!=a?a.included:a,{name:"if",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:"")+'>\n		<label for="main'+i((f=null!=(f=b.os_product_id||(null!=a?a.os_product_id:a))?f:g,typeof f===h?f.call(a,{name:"os_product_id",hash:{},data:d}):f))+"-"+i((f=null!=(f=b.cid||(null!=a?a.cid:a))?f:g,typeof f===h?f.call(a,{name:"cid",hash:{},data:d}):f))+'">'+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+"</label>\n	</div>\n</div>\n\n"+(null!=(e=b["if"].call(a,null!=a?a.extra:a,{name:"if",hash:{},fn:this.program(5,d,0),inverse:this.noop,data:d}))?e:"")},useData:!0}),this.Templates.customize__productinfo=Handlebars.template({1:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return"<h4>"+g(f(null!=(e=null!=(e=null!=(e=null!=a?a.base:a)?e.variant:e)?e.ingredients:e)?e.title:e,a))+"</h4>\n<p>\n	<strong>"+g(f(null!=(e=null!=a?a.base:a)?e.name:e,a))+":</strong> "+(null!=(e=f(null!=(e=null!=(e=null!=(e=null!=a?a.base:a)?e.variant:e)?e.ingredients:e)?e.text:e,a))?e:"")+"<br />\n	<strong>"+g(f(null!=(e=null!=a?a.extension:a)?e.name:e,a))+":</strong> "+(null!=(e=f(null!=(e=null!=(e=null!=(e=null!=a?a.extension:a)?e.variant:e)?e.ingredients:e)?e.text:e,a))?e:"")+"\n</p>\n"},3:function(a,b,c,d){var e,f=this.lambda;return"<h4>"+this.escapeExpression(f(null!=(e=null!=(e=null!=(e=null!=a?a.base:a)?e.variant:e)?e.ingredients:e)?e.title:e,a))+"</h4>\n<p>"+(null!=(e=f(null!=(e=null!=(e=null!=(e=null!=a?a.base:a)?e.variant:e)?e.ingredients:e)?e.text:e,a))?e:"")+"</p>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return null!=(e=b["if"].call(a,null!=a?a.extension:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.program(3,d,0),data:d}))?e:""},useData:!0}),this.Templates.customize__productthumb=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'<div class="grid__elm" data-link-block>\n\n	<div class="product-thumb">\n		<a href="#" data-product-id="'+i((f=null!=(f=b.os_product_id||(null!=a?a.os_product_id:a))?f:g,typeof f===h?f.call(a,{name:"os_product_id",hash:{},data:d}):f))+'"><img class="product-thumb__image" src="'+i((f=null!=(f=b.image||(null!=a?a.image:a))?f:g,typeof f===h?f.call(a,{name:"image",hash:{},data:d}):f))+'" alt="'+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+'"></a>\n		<div class="product-thumb__name">\n			<h3>'+i((f=null!=(f=b.number||(null!=a?a.number:a))?f:g,typeof f===h?f.call(a,{name:"number",hash:{},data:d}):f))+"</h3>\n			<h2>"+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+'</h2>\n			<i class="product-thumb__tag product-thumb__tag--hot"></i>\n			<i class="product-thumb__tag product-thumb__tag--veg"></i>\n		</div>\n		<div class="product-thumb__description">\n			<p>'+(null!=(f=null!=(f=b.description_short||(null!=a?a.description_short:a))?f:g,e=typeof f===h?f.call(a,{name:"description_short",hash:{},data:d}):f)?e:"")+'</p>\n		</div>\n		<div class="product-thumb__prices">\n			<div class="product-thumb__price">\n				<p class="product-thumb__price-amount">'+i((f=null!=(f=b.price||(null!=a?a.price:a))?f:g,typeof f===h?f.call(a,{name:"price",hash:{},data:d}):f))+"</p>\n			</div>\n		</div>\n	</div>\n\n</div>"},useData:!0}),this.Templates["form__addressfinder-item"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return'<a class="form-group__dropdown-item" href="#">'+this.escapeExpression((e=null!=(e=b.description||(null!=a?a.description:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"description",hash:{},data:d}):e))+"</a>"},useData:!0}),this.Templates["form__restaurantfinder-item"]=Handlebars.template({1:function(a,b,c,d){return'<p class="uppercase green">Åpen</p>\n'},3:function(a,b,c,d){return'<p class="uppercase red">Stengt</p>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'<a href="#" tabindex="-1">'+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+"</a>\n<p>"+i((f=null!=(f=b.address||(null!=a?a.address:a))?f:g,typeof f===h?f.call(a,{name:"address",hash:{},data:d}):f))+"</p>\n\n"+(null!=(e=b["if"].call(a,null!=a?a.isOpen:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.program(3,d,0),data:d}))?e:"")+"\n<p>"+i((f=null!=(f=b.openingHourString||(null!=a?a.openingHourString:a))?f:g,typeof f===h?f.call(a,{name:"openingHourString",hash:{},data:d}):f))+"</p>"},useData:!0}),this.Templates.form__restaurantfinder=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return""},useData:!0}),this.Templates.map__infowindow=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div style="overflow: auto;">\n	<p class="location" style="display: none;"><span class="distance">2</span> km</p>\n	<h3>Dolly Dimple\'s NAF-huset</h3>\n	<p>Storgata 2</p>\n	<p>0155 Oslo</p>\n	<p><a href="/backoffice/restaurant/1001">Se åpningstider</a></p>\n</div>'},useData:!0}),this.Templates.popup__delivery=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="popup__content popup__content--narrow restaurant-list">\n	\n	<h2>…PSSST!</h2>\n\n	<form action="" novalidate>\n\n		<h3>SPAR PENGER VED Å HENTE SELV</h3>\n\n		<p>Din nærmeste Dolly Dimple\'s restaurant er:</p>\n\n		<ul id="restaurant-suggestion" class="restaurant-list"></ul>\n\n		<p>Ønsker du å bestille ‘Pizza Italia’ kan denne kun hentes. Gå tilbake for å endre bestillingsmåte, eller gå videre.</p>\n\n		<hr>\n\n		<div class="form-group">\n			<div class="form-group__field">\n				<button class="form-group__btn form-group__btn--next" type="submit">Gå videre</button>\n				<a href="#" class="form-group__back" id="popup-back"></a>\n			</div>\n		</div>\n	</form>\n\n</div>'},useData:!0}),this.Templates.popup__forgot=Handlebars.template({1:function(a,b,c,d){return"disabled"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=this.escapeExpression;return'<div class="popup__content popup__content--narrow">\n	\n	<h2>Glemt passord</h2>\n\n	<p>Få tilsendt PIN-kode ved å skrive inn ditt mobilnummer og trykk send.</p>\n\n	<form action="" novalidate>\n\n		<div class="form-group">\n			<div class="form-group__field form-group__field--large form-group__field--collapsed">\n				<input type="tel" name="phone" id="phone" placeholder="Mobilnummer" value="'+g((f=null!=(f=b.phone||(null!=a?a.phone:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"phone",hash:{},data:d}):f))+'">\n			</div>\n			<div class="form-group__field form-group__field--small form-group__field--collapsed">\n				<button class="form-group__btn form-group__btn--next" id="send-pin" '+(null!=(e=b.unless.call(a,null!=a?a.phone:a,{name:"unless",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>Send</button>\n			</div>\n		</div>\n		<div class="form-group">\n			<div class="form-group__field">\n				<input type="text" name="pin" id="pin" pattern="\\d*" maxlength="4" placeholder="Pin" value="'+g(this.lambda(null!=(e=null!=a?a.pin:a)?e.pin:e,a))+'" readonly>\n			</div>\n		</div>\n		<div class="form-group">\n			<div class="form-group__field">\n				<input type="password" name="password" id="password" placeholder="Passord" '+(null!=(e=b.unless.call(a,null!=a?a.pin:a,{name:"unless",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>\n			</div>\n			<div class="form-group__field">\n				<input type="password" name="passwordrepeat" id="passwordrepeat" placeholder="Gjenta passord" '+(null!=(e=b.unless.call(a,null!=a?a.pin:a,{name:"unless",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>\n			</div>\n		</div>\n	\n		<hr>\n\n		<div class="form-group">\n			<div class="form-group__field">\n				<button class="form-group__btn form-group__btn--next" type="submit" disabled>Gå videre</button>\n				<a href="#" class="form-group__back" id="popup-back"></a>\n			</div>\n		</div>\n	</form>\n\n</div>'},useData:!0}),this.Templates.popup__login=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="popup__content popup__content--narrow">\n	\n	<h2>Velkommen</h2>\n\n	<div class="form-group">\n		<div class="form-group__field">\n			<button class="form-group__btn--block form-group__btn--facebook" id="fb-btn">Logg inn med Facebook</button>\n		</div>\n	</div>\n	<p class="divider">eller...</p>\n\n	<form action="" novalidate>\n		<div class="form-group">\n			<div class="form-group__field">\n				<input type="tel" name="phone" placeholder="Mobilnummer">\n			</div>\n			<div class="form-group__field">\n				<input type="password" name="password" placeholder="Passord">\n			</div>\n		</div>\n\n		<div class="form-group">\n			<button class="form-group__btn form-group__btn--next" type="submit">Logg inn</button>\n			<a class="form-group__btn form-group__btn--link" id="forgot-btn" href="#">Glemt passord</a>\n		</div>\n	</form>\n\n	<hr>\n\n	<div class="form-group">\n		<div class="form-group__field">\n			<a class="form-group__btn" id="create-btn" href="#">Opprett konto</a>\n		</div>\n	</div>\n\n</div>'},useData:!0}),this.Templates.popup__order=Handlebars.template({1:function(a,b,c,d){var e,f,g=this.lambda,h=this.escapeExpression;return'					<tr class="cart__row">\n						<td>\n							<img class="cart__image" src="'+h(g(null!=a?a.image:a,a))+'" alt="'+h(g(null!=a?a.name:a,a))+'">\n						</td>\n						<td>\n							<h3 class="cart__title">'+h(g(null!=a?a.name:a,a))+"</h3>\n"+(null!=(e=b["if"].call(a,null!=a?a.split:a,{name:"if",hash:{},fn:this.program(2,d,0),inverse:this.program(5,d,0),data:d}))?e:"")+'						</td>\n						<td class="cart__prices">\n							'+(null!=(e=b["if"].call(a,null!=a?a.discounted:a,{name:"if",hash:{},fn:this.program(7,d,0),inverse:this.noop,data:d}))?e:"")+"\n							<p>"+h((f=null!=(f=b.price||(null!=a?a.price:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"price",hash:{},data:d}):f))+" kr</p>\n						</td>\n					</tr>\n"},2:function(a,b,c,d){var e;return null!=(e=b.each.call(a,null!=a?a.parts:a,{name:"each",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:""},3:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return"								<p><strong>"+g(f(null!=a?a.name:a,a))+":</strong> "+g(f(null!=(e=null!=a?a.description:a)?e.text:e,a))+"</p>\n"},5:function(a,b,c,d){var e;return"								<p>"+this.escapeExpression(this.lambda(null!=(e=null!=a?a.description:a)?e.text:e,a))+"</p>\n"},7:function(a,b,c,d){var e;return'<p class="cart__discounted">'+this.escapeExpression((e=null!=(e=b.discounted||(null!=a?a.discounted:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"discounted",hash:{},data:d}):e))+" kr</p>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f;return'<div class="popup__content">\n	\n	<h2>ID: '+this.escapeExpression((f=null!=(f=b.id||(null!=a?a.id:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"id",hash:{},data:d}):f))+'</h2>\n\n	<div class="info-group">\n		<div class="info-group__field">\n\n			<h4>Kundenavn</h4>\n			<p>Ola Normann</p>\n\n		</div><div class="info-group__field">\n\n			<h4>LEVERES VED</h4>\n			<p>Adresse Gaten 12, 4321, Stavanger</p>\n\n		</div><div class="info-group__field">\n\n			<h4>BETALINGSMÅTE</h4>\n			<p>Kontant</p>\n\n		</div><div class="info-group__field">\n\n			<h4>AVTALT TID</h4>\n			<p>Fredag 01.02.2015 - 22:05</p>\n\n		</div>\n	</div>\n\n	<div class="orders">\n		<h3>Ordren din</h3>\n		\n		<div class="table-container">\n			<table class="cart-table">\n				<tbody id="cart-content">\n					\n'+(null!=(e=b.each.call(a,null!=a?a.items:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'\n				</tbody>\n			</table>\n		</div>\n\n		<div class="cart__summary">\n			<div class="form-group form-group--bordered cart__summary-prices">\n				<div class="form-group__field form-group__field--text">\n					<p>Totalt</p>\n					<p class="cart__amount"><span id="cart-amount">1450</span> kr</p>\n				</div>\n			</div>\n			<div class="form-group">\n				<div class="form-group__field">\n					<a href="#" class="form-group__btn form-group__btn--block form-group__btn--transparent">KANSLERER ORDRE</a>\n				</div>\n			</div>\n			<div class="form-group">\n				<div class="form-group__field">\n					<a href="#" class="form-group__btn form-group__btn--block form-group__btn--next">ENDRE ORDRE</a>\n				</div>\n			</div>\n		</div>\n\n	</div>\n\n</div>\n'},useData:!0}),this.Templates.popup__ordertype=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'<div class="popup__content popup__content--narrow">\n	\n	<h2>Bestillingsmåte</h2>\n\n	<form action="" novalidate>\n\n		<div class="list-menu" id="order-types">\n\n			<ul>\n				<li>\n					<a href="#" class="list-menu__link" data-expand="#ordertype-pickup" data-expand-onload data-collapse="#ordertype-deliver,#ordertype-hotel">Hente selv</a>\n\n					<div class="dropdown closed" id="ordertype-pickup">\n						<fieldset disabled>\n\n							<div id="restaurants-init-closest" class="hidden">\n								<p class="text-center">eller...</p>\n							</div>\n\n							<input type="hidden" name="type" value="TAKEAWAY">\n							<input type="hidden" name="restaurant" value="">\n\n							<div class="form-group">\n								<div class="form-group__field">\n									<input type="text" name="position" placeholder="Sted/Postnr.">\n								</div>\n							</div>\n						</fieldset>\n					</div>\n				</li>\n				<li>\n					<a href="#" class="list-menu__link" data-expand="#ordertype-deliver" data-collapse="#ordertype-pickup,#ordertype-hotel">Levering</a>\n\n					<div class="dropdown closed" id="ordertype-deliver">\n						<fieldset disabled>\n							<input type="hidden" name="type" value="DELIVERY">\n							<input type="hidden" name="confirmed" value="false">\n\n							<div class="form-group">\n								<div class="form-group__field">\n									<select name="addressType" id="stored-address" data-select-open>\n										<option value="HOME" data-select-open-target="#home-address-container">Hjem</option>\n										<option value="WORK" data-select-open-target="#work-address-container">Arbeid</option>\n										<option value="OTHER" data-select-open-target="#other-address-container">Annen</option>\n									</select>\n								</div>\n							</div>\n\n							<div id="home-address-container">\n								<div class="form-group">\n									<div class="form-group__field">\n										<input type="text" id="home-address" name="addresses[home][address]" placeholder="Gate" autocomplete="off" data-address-dropdown="#home-address-dropdown" value="'+g(f(null!=(e=null!=(e=null!=a?a.addresses:a)?e.home:e)?e.address:e,a))+'">\n									</div>\n								</div>\n\n								<div class="form-group__dropdown" id="home-address-dropdown"></div>\n\n								<div class="form-group">\n									<div class="form-group__field form-group__field--small">\n										<input type="text" name="addresses[home][postCode]" placeholder="P.nr." value="'+g(f(null!=(e=null!=(e=null!=a?a.addresses:a)?e.home:e)?e.post_code:e,a))+'">\n									</div>\n									<div class="form-group__field form-group__field--large">\n										<input type="text" name="addresses[home][postOffice]" placeholder="Sted" value="'+g(f(null!=(e=null!=(e=null!=a?a.addresses:a)?e.home:e)?e.post_office:e,a))+'">\n									</div>\n								</div>\n\n								<div class="form-group">\n									<div class="form-group__field">\n										<input type="text" name="addresses[home][directions]" placeholder="Veibeskrivelse" value="'+g(f(null!=(e=null!=(e=null!=a?a.addresses:a)?e.home:e)?e.directions:e,a))+'">\n									</div>\n								</div>\n							</div>\n\n							<div id="work-address-container">\n								<div class="form-group">\n									<div class="form-group__field">\n										<input type="text" id="work-address" name="addresses[work][address]" placeholder="Gate" autocomplete="off" data-address-dropdown="#work-address-dropdown" value="'+g(f(null!=(e=null!=(e=null!=a?a.addresses:a)?e.work:e)?e.address:e,a))+'">\n									</div>\n								</div>\n\n								<div class="form-group__dropdown" id="work-address-dropdown"></div>\n\n								<div class="form-group">\n									<div class="form-group__field form-group__field--small">\n										<input type="text" name="addresses[work][postCode]" placeholder="P.nr." value="'+g(f(null!=(e=null!=(e=null!=a?a.addresses:a)?e.work:e)?e.post_code:e,a))+'">\n									</div>\n									<div class="form-group__field form-group__field--large">\n										<input type="text" name="addresses[work][postOffice]" placeholder="Sted" value="'+g(f(null!=(e=null!=(e=null!=a?a.addresses:a)?e.work:e)?e.post_office:e,a))+'">\n									</div>\n								</div>\n\n								<div class="form-group">\n									<div class="form-group__field">\n										<input type="text" name="addresses[work][directions]" placeholder="Veibeskrivelse" value="'+g(f(null!=(e=null!=(e=null!=a?a.addresses:a)?e.work:e)?e.directions:e,a))+'">\n									</div>\n								</div>\n							</div>\n\n							<div id="other-address-container">\n								<div class="form-group">\n									<div class="form-group__field">\n										<input type="text" id="other-address" name="addresses[other][address]" placeholder="Gate" autocomplete="off" data-address-dropdown="#other-address-dropdown" value="'+g(f(null!=(e=null!=(e=null!=a?a.addresses:a)?e.other:e)?e.address:e,a))+'">\n									</div>\n								</div>\n\n								<div class="form-group__dropdown" id="other-address-dropdown"></div>\n\n								<div class="form-group">\n									<div class="form-group__field form-group__field--small">\n										<input type="text" name="addresses[other][postCode]" placeholder="P.nr." value="'+g(f(null!=(e=null!=(e=null!=a?a.addresses:a)?e.other:e)?e.post_code:e,a))+'">\n									</div>\n									<div class="form-group__field form-group__field--large">\n										<input type="text" name="addresses[other][postOffice]" placeholder="Sted" value="'+g(f(null!=(e=null!=(e=null!=a?a.addresses:a)?e.other:e)?e.post_office:e,a))+'">\n									</div>\n								</div>\n\n								<div class="form-group">\n									<div class="form-group__field">\n										<input type="text" name="addresses[other][directions]" placeholder="Veibeskrivelse" value="'+g(f(null!=(e=null!=(e=null!=a?a.addresses:a)?e.other:e)?e.directions:e,a))+'">\n									</div>\n								</div>\n							</div>\n\n						</fieldset>\n					</div>\n				</li>\n				<li>\n					<a href="#" class="list-menu__link" data-expand="#ordertype-hotel" data-collapse="#ordertype-deliver,#ordertype-pickup">Hotell</a>\n\n					<div class="dropdown closed" id="ordertype-hotel">\n						<fieldset disabled>\n\n							<input type="hidden" name="type" value="HOTEL">\n\n							<div class="form-group">\n								<div class="form-group__field">\n									<input type="text" name="hotel" placeholder="Hotellnummer">\n								</div>\n							</div>\n\n							<div class="form-group">\n								<div class="form-group__field">\n									<input type="text" name="room" placeholder="Romnummer">\n								</div>\n							</div>\n							\n						</fieldset>\n					</div>\n				</li>\n			</ul>\n\n		</div>\n\n		<div class="form-group">\n			<div class="form-group__field">\n				<button class="form-group__btn form-group__btn--next" type="submit">Gå videre</button>\n			</div>\n		</div>\n\n	</form>\n\n</div>';
},useData:!0}),this.Templates.popup__product=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'<div class="popup__content popup__content--full">\n\n	<div class="product">\n\n		<img id="product-image" src="'+i((f=null!=(f=b.image||(null!=a?a.image:a))?f:g,typeof f===h?f.call(a,{name:"image",hash:{},data:d}):f))+'" alt="'+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+'" class="product__image">\n\n		<div class="product__content">\n			<form action="" novalidate>\n\n				<h2 id="product-name">'+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+'</h2>\n\n				<div class="form-group">\n					<div class="form-group__field">\n						<label class="form-group__label" for="variants">TYPE / STØRRELSE</label>\n						<select name="selected_variant_id" id="variants" data-disable-custom></select>\n					</div>\n				</div>\n\n				<div class="form-group">\n					<div class="form-group__field form-group__field--small">\n						<label class="form-group__label" for="quantity">Antall</label>\n						<input type="number" min="1" name="quantity" id="quantity" placeholder="Antall" value="1">\n					</div>\n\n					<div class="form-group__field form-group__field--large">\n						<label class="form-group__label" for="cooking">STEKING</label>\n						<select name="cooking" id="cooking"></select>\n					</div>\n				</div>\n\n				<div class="form-group">\n					<h4>Beskrivelse</h4>\n					'+(null!=(f=null!=(f=b.description_long||(null!=a?a.description_long:a))?f:g,e=typeof f===h?f.call(a,{name:"description_long",hash:{},data:d}):f)?e:"")+'\n				</div>\n\n				<div class="form-group form-group--bottom">\n					<div class="form-group__field form-group__field--half">\n						<a id="customize-btn" class="form-group__btn hidden" href="'+i((f=null!=(f=b.url||(null!=a?a.url:a))?f:g,typeof f===h?f.call(a,{name:"url",hash:{},data:d}):f))+'">Tilpass</a>\n					</div>\n					<div class="form-group__field form-group__field--half">\n						<button id="add-to-cart-btn" class="form-group__btn form-group__btn--next" type="submit">Legg til (<span id="product-amount">'+i((f=null!=(f=b.price||(null!=a?a.price:a))?f:g,typeof f===h?f.call(a,{name:"price",hash:{},data:d}):f))+"</span> kr)</button>\n					</div>\n				</div>\n\n			</form>\n		</div>\n		\n	</div>\n\n</div>"},useData:!0}),this.Templates.popup__register=Handlebars.template({1:function(a,b,c,d){return"disabled"},3:function(a,b,c,d){var e;return'			<div class="form-group__field">\n				<input type="password" name="password" id="password" placeholder="Passord" '+(null!=(e=b.unless.call(a,null!=a?a.pin:a,{name:"unless",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>\n			</div>\n			<div class="form-group__field">\n				<input type="password" name="passwordrepeat" id="passwordrepeat" placeholder="Gjenta passord" '+(null!=(e=b.unless.call(a,null!=a?a.pin:a,{name:"unless",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+">\n			</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'<div class="popup__content popup__content--narrow">\n	\n	<h2>Opprett konto</h2>\n\n	<p>Få tilsendt PIN-kode ved å skrive inn ditt mobilnummer og trykk send.</p>\n\n	<form action="" novalidate>\n\n		<div class="form-group">\n			<div class="form-group__field form-group__field--large form-group__field--collapsed">\n				<input type="tel" name="phone" id="phone" placeholder="Mobilnummer" value="'+i((f=null!=(f=b.phone||(null!=a?a.phone:a))?f:g,typeof f===h?f.call(a,{name:"phone",hash:{},data:d}):f))+'">\n			</div>\n			<div class="form-group__field form-group__field--small form-group__field--collapsed">\n				<button class="form-group__btn form-group__btn--next" id="send-pin" '+(null!=(e=b.unless.call(a,null!=a?a.phone:a,{name:"unless",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>Send</button>\n			</div>\n		</div>\n		<div class="form-group">\n			<div class="form-group__field">\n				<input type="text" name="pin" id="pin" pattern="\\d*" maxlength="4" placeholder="Pin" value="'+i(this.lambda(null!=(e=null!=a?a.pin:a)?e.pin:e,a))+'" readonly>\n			</div>\n		</div>\n		<div class="form-group">\n			<div class="form-group__field form-group__field--half">\n				<input type="text" name="firstName" id="firstname" placeholder="Fornavn" value="'+i((f=null!=(f=b.firstName||(null!=a?a.firstName:a))?f:g,typeof f===h?f.call(a,{name:"firstName",hash:{},data:d}):f))+'" '+(null!=(e=b.unless.call(a,null!=a?a.pin:a,{name:"unless",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>\n			</div>\n			<div class="form-group__field form-group__field--half">\n				<input type="text" name="lastName" id="lastname" placeholder="Etternavn" value="'+i((f=null!=(f=b.lastName||(null!=a?a.lastName:a))?f:g,typeof f===h?f.call(a,{name:"lastName",hash:{},data:d}):f))+'" '+(null!=(e=b.unless.call(a,null!=a?a.pin:a,{name:"unless",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>\n			</div>\n		</div>\n		<div class="form-group">\n			<div class="form-group__field">\n				<input type="email" name="email" id="email" placeholder="E-post" value="'+i((f=null!=(f=b.email||(null!=a?a.email:a))?f:g,typeof f===h?f.call(a,{name:"email",hash:{},data:d}):f))+'"  value="'+i((f=null!=(f=b.email||(null!=a?a.email:a))?f:g,typeof f===h?f.call(a,{name:"email",hash:{},data:d}):f))+'" '+(null!=(e=b.unless.call(a,null!=a?a.pin:a,{name:"unless",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+">\n			</div>\n\n"+(null!=(e=b.unless.call(a,null!=a?a.facebook:a,{name:"unless",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:"")+'		</div>\n	\n		<hr>\n\n		<div class="form-group">\n			<div class="form-group__field">\n				<button class="form-group__btn form-group__btn--next" type="submit" '+(null!=(e=b.unless.call(a,null!=a?a.pin:a,{name:"unless",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>Gå videre</button>\n				<a href="#" class="form-group__back" id="popup-back"></a>\n			</div>\n		</div>\n	</form>\n\n</div>'},useData:!0}),this.Templates.popup__takeaway=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="popup__content popup__content--narrow restaurant-list">\n	\n	<h2>Hente selv</h2>\n\n	<form action="" novalidate>\n\n		<input type="hidden" name="restaurant" value="">\n\n		<ul id="restaurants-closest" class="restaurant-list"></ul>\n		<div id="restaurants-rest" class="hidden">\n            <a href="#" class="restaurant-list__toggle" data-expand="#restaurants-rest-content">Se flere restauranter</a>\n            <ul class="dropdown closed" id="restaurants-rest-content"></ul>\n		</div>\n	\n		<hr>\n\n		<div class="form-group">\n			<div class="form-group__field">\n				<button class="form-group__btn form-group__btn--next" type="submit">Gå videre</button>\n				<a href="#" class="form-group__back" id="popup-back"></a>\n			</div>\n		</div>\n	</form>\n\n</div>'},useData:!0}),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./basecollection.js"),e=a("../models/base.js");b.exports=d.extend({query:"",model:e,url:function(){var a=this;return window.API_PATH_ADDRESS_SEARCH+"?query="+a.query}})},{"../models/base.js":44,"./basecollection.js":2}],2:[function(a,b,c){"use strict";b.exports=Backbone.Collection.extend({parse:function(a){return!a.error&&a.data?a.data:a},injectUrl:function(a,b){for(var c in b)a=a.replace("{"+c+"}",b[c]);return a}})},{}],3:[function(a,b,c){"use strict";var d=a("../models/ingredient.js");b.exports=Backbone.Collection.extend({model:d,initialize:function(){}})},{"../models/ingredient.js":45}],4:[function(a,b,c){"use strict";var d=a("./basecollection.js"),e=a("../models/product.js");b.exports=d.extend({id:null,model:e,url:function(){var a=this;return a.injectUrl(window.API_PATH_SPLITTABLE,{variantId:a.id})}})},{"../models/product.js":50,"./basecollection.js":2}],5:[function(a,b,c){"use strict";var d=a("../models/product_variant.js");b.exports=Backbone.Collection.extend({model:d,initialize:function(){}})},{"../models/product_variant.js":51}],6:[function(a,b,c){"use strict";var d=a("./basecollection.js"),e=a("../models/restaurant.js");b.exports=d.extend({query:null,lat:null,"long":null,model:e,url:function(){var a=this,b="";return a.query?b="?query="+a.query:a.lat&&a["long"]&&(b="?lat="+a.lat+"&long="+a["long"]),window.API_PATH_RESTAURANT_SEARCH+b},findByString:function(a,b){var c=this;c.lat=null,c["long"]=null,"string"==typeof a&&""!==a&&(c.query=a),c.fetch({success:function(){"function"==typeof b&&b()}})},findByPosition:function(a,b,c){var d=this;d.query=null,d.lat=a,d["long"]=b,d.fetch({success:function(){"function"==typeof c&&c()}})}})},{"../models/restaurant.js":52,"./basecollection.js":2}],7:[function(a,b,c){"use strict";var d=a("../collections/addresscollection.js"),e=a("../controllers/addressfinder_item.js");b.exports=Backbone.View.extend({$input:null,$target:null,addresses:null,addressArr:null,typeTimeout:null,initialize:function(a){var b=this;b.addresses=new d,b.addresses.on("sync",function(){b.renderAddresses()}),b.$input=a.input},open:function(){var a=this;a.$target=a.$input.closest("form").find(a.$input.data("address-dropdown")),a.$input.off("input focus blur").on("input",a.writingAddress.bind(a)).on("focus",a.openDropdown.bind(a)).on("blur",a.closeDropdown.bind(a)),a.renderAddresses(),a.closeDropdown()},close:function(){var a=this;for(var b in a.addressArr)a.addressArr[b].off("CLICKED_ADDRESS").remove();return a.addressArr=[],!1},renderAddresses:function(){var a=this;a.close(),a.$target.html(""),a.addresses.each(function(b){var c=new e({model:b});c.on("CLICKED_ADDRESS",function(){a.model=this.model,a.trigger("ADDRESS_CHOSEN",a.model)}),a.addressArr.push(c),a.$target.append(c.render().el)})},writingAddress:function(){var a=this,b=a.$input.val();return b.length>2?(a.typeTimeout&&clearTimeout(a.typeTimeout),a.typeTimeout=setTimeout(function(){a.addresses.query=b,a.addresses.fetch()},200)):a.close(),!1},openDropdown:function(){var a=this;a.$target.show()},closeDropdown:function(){var a=this;setTimeout(function(){a.$target.hide()},200)}})},{"../collections/addresscollection.js":1,"../controllers/addressfinder_item.js":8}],8:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({template:Templates["form__addressfinder-item"],model:null,events:{"click a":"clickedAddress"},render:function(){var a=this;return a.$el.html(a.template(a.model.toJSON())),a},clickedAddress:function(){var a=this;return a.trigger("CLICKED_ADDRESS",a.model.toJSON()),!1}})},{}],9:[function(a,b,c){"use strict";var d=a("./cart_base.js"),e=a("./cart_item.js"),f=a("../models/product.js");b.exports=d.extend({el:"#cart",itemClass:e,itemHolder:"#cart-content",amountText:"#cart-amount",upsale:null,items:{},events:function(){var a=d.prototype.events;return _.isFunction(a)&&(a=a()),_.extend({},a,{"click [data-product-link]":"addUpsaleProduct"})},initialize:function(a){var b=this;b.order=a.order,b.order.on("ORDER_UPDATED",function(){b.run()}),b.initUpsaleProduct()},run:function(){var a=this;a.$el.length&&a.initContent()},initUpsaleProduct:function(){var a=this;a.upsale=new f,a.upsale.on("ORDER_UPDATED",function(b){var c=a.upsale.get("selected_variant_id"),d=$('.cart__offer-item:has([data-product-link="'+c+'"])');d.remove(),a.order.items.trigger("ORDER_UPDATED",b)})},addUpsaleProduct:function(a){var b=this,c=$(a.currentTarget);return b.upsale.clear().set("selected_variant_id",c.data("product-link")).save(),!1}})},{"../models/product.js":50,"./cart_base.js":10,"./cart_item.js":11}],10:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({events:{"submit form":"submitForm"},order:null,items:{},initContent:function(){var a=this;a.removeContent(),a.order.items.each(function(b){var c=b.get("id"),d=a.items[c];d||(d=new a.itemClass({model:b}),d.on("REMOVE_ITEM",function(){var b=this.model.get("id");this.destroy(),delete a.items[b]}),a.items[c]=d),a.$(a.itemHolder).append(d.render().el)}),a.order.on("change:amount",function(){a.setAmount()}),a.setAmount()},removeContent:function(){var a=this;for(var b in a.items){var c=a.items[b];c.remove()}},setAmount:function(){var a=this,b=a.order.get("amount");b||(b=0),a.$(a.amountText).html(b)},submitForm:function(){}})},{}],11:[function(a,b,c){"use strict";var d=a("./cart_item_base.js");b.exports=d.extend({tagName:"tr",template:Templates.cart__row,className:"cart__row"})},{"./cart_item_base.js":12}],12:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({events:{"input .quantity-picker__input":"updateQuantity","click .quantity-picker__controller--remove":"removeItem"},initialize:function(){var a=this;a.model.on("change",function(){a.render()})},render:function(){var a=this;return a.$el.html(a.template(a.model.toJSON())),a.delegateEvents(),General.initialize(a.$el),a},updateQuantity:function(){var a=this,b=parseInt(a.$(".quantity-picker__input").val());a.model.set("quantity",b)},removeItem:function(a){var b=this,c=$(a.currentTarget),d=confirm(c.data("alert"));return d&&b.trigger("REMOVE_ITEM"),!1},destroy:function(){var a=this;a.model.destroy({success:function(){a.remove()},error:function(){console.log("error deleting")}})}})},{}],13:[function(a,b,c){"use strict";var d=a("../models/product.js"),e=a("../collections/productcollection.js"),f=a("./product_base.js"),g=a("./customize_product.js");b.exports=f.extend({el:"#product",single:null,parts:[],splittable:null,infoTemplate:Templates.customize__productinfo,thumbTemplate:Templates.customize__productthumb,events:function(){var a=f.prototype.events;return _.isFunction(a)&&(a=a()),_.extend({},a,{"click #split-pizza-btn":"prepareSplit"})},initialize:function(a){var b=this;f.prototype.initialize.call(b,a),b.$el.length&&b.initProduct()},initProduct:function(){var a=this;a.model=new d(a.$("form").serializeObject()),a.model.on("sync",function(){var b=a.model.get("extension");b?a.initSplit([new d(a.model.get("base")),new d(b)]):a.initSingle()}).on("change:variants",function(){a.rewriteVariants(),General.initialize(a.$("#variants"))}).on("change:price change:amount",function(){a.setAmount()}),a.model.fetch(),a.splittable=new e,a.splittable.on("sync",function(){a.renderSplittable()})},initSingle:function(){var a=this;a.single=new g({product:a.model.clone(),container:a.$(".product__custom .product-controller--part1 ul")}),a.single.product.removeUncustomizableVariants(),a.single.product.on("change:variants",function(){a.updateSinglePrice(),a.rewriteInfo()}).on("change:variant",function(){a.updateSingleModel()}),a.updateSingleModel(),a.rewriteInfo()},resetSingle:function(){var a=this;a.single.product.off("change:amount"),a.model.selectedVariant.off("change:ingredients"),a.model.selectedVariant=null},prepareSplit:function(){var a=this;return a.splittable.id=a.single.product.get("os_product_id"),a.splittable.fetch(),!1},renderSplittable:function(){var a=this;console.log("rendering splittable",a.splittable),a.$("#product-thumbs [data-product-id]").off("click"),a.$("#product-thumbs").html(""),a.splittable.each(function(b){var c=a.thumbTemplate(b.toJSON());a.$("#product-thumbs").append(c)}),a.$("#split-pizza-btn").attr("disabled","disabled"),a.$("#product-thumbs").addClass("open"),General.initialize(a.$("#product-thumbs")),a.$("#product-thumbs [data-product-id]").on("click",function(b){return a.splitPizza($(b.currentTarget).data("product-id")),!1})},splitPizza:function(a){var b=this;return b.$("#product-thumbs, #split-pizza").removeClass("open"),b.$("#splitted-pizza").addClass("open"),b.splitModel(a),!1},splitModel:function(a){var b=this,c=new d({productID:a,type:b.model.get("type")});c.once("PRODUCT_LOADED",function(){var a=[b.single.product.clone(),c];b.initSplit(a)}).fetch()},initSplit:function(a){var b=this;b.resetSingle(),b.model.set({id:null,variants:null,selected_variant_id:null,name:"Pizza delt i 2"},{silent:!0});var c=new g({product:a[0],container:b.$(".product__custom .product-controller--part1 ul")}),d=new g({product:a[1],container:b.$(".product__custom .product-controller--part2 ul")});c.product.removeUnsplittableVariants(),c.product.removeUncustomizableVariants(),d.product.removeUnsplittableVariants(),d.product.removeUncustomizableVariants(),b.parts.push(c),b.parts.push(d),c.product.on("change:variants",function(){b.updateSplitPrice(),b.rewriteInfo()}).set("quantity",1).on("change:variant",function(){b.updateSplitModel(),b.rewriteInfo()}),d.product.on("change:variants",function(){console.log("split pizza part2 price changed",d.product.selectedVariant.get("totalPrice")),b.updateSplitPrice()}).set("quantity",1).on("change:variant",function(){b.updateSplitModel()}),b.rewriteVariants(),b.$("#variants, #variants option").attr("disabled","disabled").trigger("change"),b.updateSplitModel(),b.updateSplitPrice(),b.rewriteInfo(),General.initialize(b.$("#variants"))},updateSingleModel:function(){var a=this;a.model.set("base",a.single.product.toJSON())},updateSplitModel:function(){var a=this;a.model.set("base",a.parts[0].product.toJSON()),a.model.set("extension",a.parts[1].product.toJSON())},updateSinglePrice:function(){var a=this;a.model.set("price",a.single.product.selectedVariant.get("totalPrice"))},updateSplitPrice:function(){var a,b=this,c=b.parts[0].product.get("price"),d=b.parts[1].product.get("price");a=c>d?c:d;var e={basics:{},extras:{}};e=b.checkSplitIngredients(b.parts[0].product.selectedVariant.ingredients,e),e=b.checkSplitIngredients(b.parts[1].product.selectedVariant.ingredients,e);for(var f in e.basics)a+=e.basics[f];for(var g in e.extras)a+=e.extras[g];b.model.set("price",a)},checkAddedIngredients:function(a){var b={basics:{},extras:{}};return a.each(function(a){var c=a.get("os_product_id"),d=a.get("price"),e=a.get("extraModel");if(a.get("included")&&0!==d&&(b.basics[c]=d),e){var f=e.get("os_product_id"),g=e.get("price");e.get("included")&&0!==g&&(b.extras[f]=g)}}),b},sortSubArr:function(a,b){return a.sort(function(a,c){return a[b]-c[b]}),a},sortObjectToArr:function(a){var b=this,c=[];for(var d in a)c.push([d,a[d]]);return c=b.sortSubArr(c,1)},checkIngredientsArr:function(a,b){for(var c in b)if(a[0]===b[c][0])return c;return!1},getIngredientsAddonsObjects:function(a,b){var c,d=this,e=[],f=d.sortObjectToArr(a.basic),g=d.sortObjectToArr(a.extras);for(c in f)f[c].extra=!1,e.push(f[c]);for(c in g)f[c].extra=!0,e.push(g[c]);console.log(e,b)},checkPayableIngredients:function(a){var b,c,d=this,e={basics:[],extras:[]},f={basics:[],extras:[]},g={basics:[],extras:[]},h={basics:[],extras:[]};console.log("getIngredientsAddonsObjects - baseIngredients",d.getIngredientsAddonsObjects(a.baseIngredients,a.baseNumFree)),console.log("getIngredientsAddonsObjects - extensionIngredients",d.getIngredientsAddonsObjects(a.extensionIngredients,a.extensionNumFree)),c=d.sortObjectToArr(a.baseIngredients.basics);for(b in c)a.baseNumFree&&f.basics.length+f.extras.length<a.baseNumFree?f.basics.push(c[b]):e.basics.push(c[b]);c=d.sortObjectToArr(a.baseIngredients.extras);for(b in c)a.baseNumFree&&f.basics.length+f.extras.length<a.baseNumFree?f.extras.push(c[b]):e.extras.push(c[b]);c=d.sortObjectToArr(a.extensionIngredients.basics);for(b in c)a.extensionNumFree&&h.basics.length+h.extras.length<a.extensionNumFree?h.basics.push(c[b]):g.basics.push(c[b]);c=d.sortObjectToArr(a.extensionIngredients.extras);for(b in c)a.extensionNumFree&&h.basics.length+h.extras.length<a.extensionNumFree?h.extras.push(c[b]):g.extras.push(c[b]);var i;for(b in e.basics)i=d.checkIngredientsArr(e.basics[b],g.basics),i!==!1?console.log("baseAddon.basics ("+e.basics[b][0]+") found in extensionAddons.basics["+i+"]"):a.baseNumFree&&(i=d.checkIngredientsArr(e.basics[b],h.basics),i!==!1&&console.log("baseAddon.basics ("+e.basics[b][0]+") found in extensionFree.basics["+i+"]"));for(b in e.extras)i=d.checkIngredientsArr(e.extras[b],g.extras),i!==!1?console.log("baseAddon.extras ("+e.extras[b][0]+") found in extensionAddons.extras["+i+"]"):a.baseNumFree&&(i=d.checkIngredientsArr(e.extras[b],h.extras),i!==!1&&console.log("baseAddon.extras ("+e.extras[b][0]+") found in extensionFree.extras["+i+"]"));for(b in g.basics)i=d.checkIngredientsArr(g.basics[b],e.basics),i!==!1?console.log("extensionAddons.basics ("+g.basics[b][0]+") found in baseAddons.basics["+i+"]"):a.extensionNumFree&&(i=d.checkIngredientsArr(g.basics[b],f.basics),i!==!1&&console.log("extensionAddons.basics ("+g.basics[b][0]+") found in baseFree.basics["+i+"]"));for(b in g.extras)i=d.checkIngredientsArr(g.extras[b],e.extras),i!==!1?console.log("extensionAddons.extras ("+g.extras[b][0]+") found in baseAddons.extras["+i+"]"):a.extensionNumFree&&(i=d.checkIngredientsArr(g.extras[b],f.extras),i!==!1&&console.log("extensionAddons.extras ("+g.extras[b][0]+") found in baseFree.extras["+i+"]"));return{baseAddons:e,baseFree:f,extensionAddons:g,extensionFree:h}},checkSplitIngredients:function(a,b){return a.each(function(a){var c=a.get("os_product_id"),d=a.get("price"),e=a.get("extraModel");if(!b.basics[c]&&a.get("included")&&0!==d&&(b.basics[c]=d),e){var f=e.get("os_product_id"),g=e.get("price");!b.extras[f]&&e.get("included")&&0!==g&&(b.extras[f]=g)}}),b}})},{"../collections/productcollection.js":4,"../models/product.js":50,"./customize_product.js":15,"./product_base.js":36}],14:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({ingredient:null,template:Templates.customize__ingredient,events:{"change input":"updateIngredient"},initialize:function(a){var b=this;b.ingredient=a.ingredient},render:function(){var a=this,b=a.ingredient.toJSON();return b.cid=a.cid,a.$el.html(a.template(b)),a},updateIngredient:function(a){var b=this,c=$(a.currentTarget),d=c.is(":checked");if(c.data("ingredient-parent")){var e=b.ingredient.get("extraModel");e.set({included:d})}else b.ingredient.set("included",d)}})},{}],15:[function(a,b,c){"use strict";var d=a("./customize_ingredient.js"),e=a("../models/ingredient.js");b.exports=Backbone.View.extend({product:null,template:Templates.customize__category,initialize:function(a){var b=this;b.product=a.product,b.container=a.container,b.product.on("PRODUCT_LOADED",function(){b.writeIngredients()}),b.writeIngredients()},writeIngredients:function(){var a=this,b=a.product.get("selected_variant_id"),c=a.product.variants.get(b),f=c.get("ingredients"),g=this.container.find('[id^="dropdown"].is-open');this.container.html("");for(var h in f.categories){var i=f.categories[h];i.cid=a.cid,i.dropdownId="dropdown"+i.os_category_id,i.open=g.is("#"+i.dropdownId);var j=$(a.template(i));this.container.append(j);for(var k,l=i.list.length,m=0;l-1>=m;m++){m%Math.ceil(l/4)===0&&(k=$('<div class="product__custom-column">').appendTo(j.find(".dropdown")));var n=c.ingredients.get(i.list[m][e.prototype.idAttribute]),o=new d({ingredient:n});k.append(o.render().el)}}General.initialize(a.container)}})},{"../models/ingredient.js":45,"./customize_ingredient.js":14}],16:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({loaded:!1,appId:window.FB_APP_ID,apiVersion:window.FB_API_VERSION,load:function(a){var b=this;window.fbAsyncInit=function(){FB.init({appId:b.appId,xfbml:!0,version:b.apiVersion}),FB.getLoginStatus(function(b){console.log("facebook response",b),"function"==typeof a&&a("connected"===b.status?b.authResponse:!1)}),b.loaded=!0},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/nb_NO/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk")},logIn:function(a){var b=this;b.loaded?FB.login(function(b){"function"==typeof a&&a(b?b.authResponse:!1)},{scope:"public_profile,email"}):"function"==typeof a&&a(!1)},loadInfo:function(a){FB.api("/me",function(b){a(b)})}})},{}],17:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({user:null,$subheader:null,$subheaderList:null,$subDropdown:null,$subDropdownList:null,initialize:function(a){var b=this;b.user=a.user,b.initMyPageLink(),b.$subheader=$("#subheader"),b.$subheader.length&&b.initSubheader()},initMyPageLink:function(){var a=this;$("#my-page").click(function(){return a.trigger("OPEN_MYPAGE",$(this).attr("href")),!1})},initSubheader:function(){var a=this;a.$subDropdown=a.$subheader.find("#subheader-dropdown"),a.$subheaderList=a.$subheader.find("#subheader-list"),a.$subDropdownList=a.$subheader.find("#subheader-dropdown-list"),$(window).resize(function(){a.resetSubheaderElements()}),a.resetSubheaderElements()},resetSubheaderElements:function(){var a=this;a.$subDropdown.before(a.$subDropdownList.children("li")).addClass("active");var b=a.$subheaderList.width()-a.$subDropdown.children("a:first").width();a.$subDropdown.removeClass("active");for(var c=a.$subheaderList.children(":not(.subheader-dropdown)").get(),d=c.length-1;d>=0;d--){var e=$(c[d]),f=e.position(),g=f.left+e.width();if(!(g>b))break;a.$subDropdownList.prepend(e),a.$subDropdown.addClass("active")}}})},{}],18:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({el:"#product-thumbs",initialize:function(){var a=this;a.$el.length&&a.initProducts()},initProducts:function(){var a=this;a.$("[data-product-link]").click(function(){return a.openProduct(parseInt($(this).data("product-link"))),!1})},openProduct:function(a){var b=this;b.trigger("OPEN_PRODUCT",a)}})},{}],19:[function(a,b,c){"use strict";var d=a("../models/order.js");b.exports=Backbone.View.extend({$orderList:null,order:null,initialize:function(){var a=this;a.$orderList=$("#order-list"),a.order=new d,a.$orderList.length&&a.initOrderList()},initOrderList:function(){var a=this;a.$orderList.find(".order-list__edit").click(function(){return a.openOrderPopup($(this).data("order-id")),!1})},openOrderPopup:function(a){var b=this;b.order.off("ORDER_UPDATED").clear().set("id",a).on("ORDER_UPDATED",function(){b.trigger("OPEN_ORDER",b.order)}).fetch()}})},{"../models/order.js":46}],20:[function(a,b,c){"use strict";var d=a("./addressfinder.js");b.exports=Backbone.View.extend({el:"#my-profile",user:null,initialize:function(a){var b=this;b.user=a.user,b.$el.length&&b.initMyProfile()},initMyProfile:function(){var a=this;a.initAddressFinders()},initAddressFinders:function(){var a=this;a.homeAddressFinder=new d({input:a.$('[name="addresses[home][address]"]')}),a.homeAddressFinder.on("ADDRESS_CHOSEN",function(b){a.$("#home_streetname").val(b.get("address")),a.$('#home_zip"]').val(b.get("postCode")),a.$("#home_city").val(b.get("postOffice")),a.$("#home_directions").focus()}).open(),a.workAddressFinder=new d({input:a.$('[name="addresses[work][address]"]')}),a.workAddressFinder.on("ADDRESS_CHOSEN",function(b){a.$("#work_streetname").val(b.get("address")),a.$('#work_zip"]').val(b.get("postCode")),a.$("#work_city").val(b.get("postOffice")),a.$("#work_directions").focus()}).open(),a.otherAddressFinder=new d({input:a.$('[name="addresses[other][address]"]')}),a.otherAddressFinder.on("ADDRESS_CHOSEN",function(b){a.$("#other_streetname").val(b.get("address")),a.$('#other_zip"]').val(b.get("postCode")),a.$("#hother_city").val(b.get("postOffice")),a.$("#other_directions").focus()}).open()}})},{"./addressfinder.js":7}],21:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({el:".main.payment",mode:"private",initialize:function(){var a=this;a.$("#payment_business, #payment_type").on("change",a.changePaymentType.bind(a)),a.$("#search_corporate").on("click",a.searchCorporate.bind(a)),a.on("CORPORATE_USER_HAS_INVOICE",a.corporateUserHasInvoice),a.on("CORPORATE_USER_HAS_INVOICE_OPTIONS",a.fillInvoiceOptions),a.on("CORPORATE_USER_HAS_NO_INVOICE",a.corporateUserHasNoInvoice),a.on("PAYMENT_TYPE_CHANGED",a.toggleBonusProgram,a),a.$("#delivery_date").on("change",a.showDateHours.bind(a))},setUp:function(){var a=this;a.$("#search_corporate").click()},changePaymentType:function(){var a=this;a.mode=a.$("#payment_business").is(":checked")?"business":"private",a.trigger("PAYMENT_TYPE_CHANGED",!a.$("#payment_business").is(":checked"))},searchCorporate:function(a){a.preventDefault();var b=this;b.trigger("SEARCH_CORPORATE",b.$("#company_code").val())},corporateUserFound:function(a){var b=this;b.$(".choose_payment_type").removeClass("hidden"),b.$("#corporate_user_name").html(a.companyName);var c=a.canPayWithInvoice;b.trigger(c?"CORPORATE_USER_HAS_INVOICE":"CORPORATE_USER_HAS_NO_INVOICE"),c&&b.trigger("CORPORATE_USER_HAS_INVOICE_OPTIONS",a.references)},corporateUserNotFound:function(){var a=this;a.$(".choose_payment_type").addClass("hidden"),a.$("#business_invoice").addClass("hidden"),$("#business_payment_cash").click()},corporateUserHasInvoice:function(){var a=this;a.$(".invoice").show()},corporateUserHasNoInvoice:function(){var a=this;a.$(".invoice").hide()},fillInvoiceOptions:function(a){var b=this;b.removeInvoiceOptions(),$.each(a,function(a,c){b.createNewInvoiceOption(a,c)})},removeInvoiceOptions:function(){var a=this;a.$("#business_invoice .form-group:not(.password)").remove()},createNewInvoiceOption:function(a,b){var c=this,d=$("<div>",{"class":"form-group"}),e=$("<div>",{"class":"form-group__field"}),f=$("<input>",{type:"text",placeholder:b.info?b.info:b.label,value:b.predefined,name:"reference["+b.id+"]"});e.append(f),d.append(e),c.$("#business_invoice").append(d)},toggleBonusProgram:function(a){var b=this;a?b.$(".bonus-program").removeClass("hidden"):b.$(".bonus-program").addClass("hidden")},switchBonusProgramLabel:function(a,b,c){var d=this;d.$(".bonus-program .form-group__field").addClass("hidden");var e="bonus-customer";a?b?e="bonus-customer-has-no-money":c&&(e="bonus-customer-has-open-order"):e="not-bonus-customer",d.$(".bonus-program ."+e).removeClass("hidden"),d.changePaymentType()},fillUserData:function(a){var b=this;b.$("#firstname").val(a.firstName),b.$("#lastname").val(a.lastName),b.$("#email").val(a.email),b.$("#phone").val(a.phone),b.switchBonusProgramLabel(a.isBonusCustomer,!1,!1)},fillAvailableOpeningHours:function(a){var b=this;b.emptyAvailableOpeningHours(),b.fillDateDropDown(a),b.fillTimeDropDown(a),b.$("#delivery_date").trigger("change"),b.customizeTimeDropDowns()},fillDateDropDown:function(a){var b=this;$.each(a,function(a,c){b.$("#delivery_date").append($("<option></option>").attr("value",c.date).text(c.date_format))})},fillTimeDropDown:function(a){var b=this;$.each(a,function(a,c){var d=c.date;if(b.$("#delivery_time").append($("<optgroup></optgroup>").attr("class",d)),c.opening_time){var e,f=parseInt(c.opening_time.split(":")[0]),g=parseInt(c.closing_time.split(":")[0]);for(e=f;g>e;)$.each([[e+":00",d],[e+":15",d],[e+":30",d],[e+":45",d]],b.appendTimeToDropDown.bind(b)),e++}})},appendTimeToDropDown:function(a,b){var c=this,d=b[0],e=b[1];c.$("#delivery_time ."+e).append($("<option></option>").attr("value",d).text(d))},emptyAvailableOpeningHours:function(){var a=this;a.$("#delivery_date").empty(),a.$("#delivery_time").empty()},customizeTimeDropDowns:function(){var a=this;a.$("#delivery_date").trigger("render.customSelect"),a.$("#delivery_time").trigger("render.customSelect")},showDateHours:function(){var a=this,b=a.$("#delivery_date").val();a.$("#delivery_time optgroup").attr("disabled",!0).addClass("hidden"),a.$("#delivery_time optgroup."+b).attr("disabled",!1).removeClass("hidden"),a.$("#delivery_time").trigger("render.customSelect")},changeDeliveryAddress:function(a,b){var c=this;c.$("#delivery_address").html(a+"<br/>"+b)}})},{}],22:[function(a,b,c){"use strict";var d=a("./cart_base.js"),e=a("./paymentcart_item.js"),f=a("../models/product.js");b.exports=d.extend({el:"#payment-data",itemClass:e,itemHolder:"#cart-content",
amountText:"#cart-amount",items:{},events:function(){var a=d.prototype.events;return _.isFunction(a)&&(a=a()),_.extend({},a,{"click [data-product-link]":"addUpsaleProduct"})},initialize:function(a){var b=this;b.order=a.order,b.order.on("ORDER_UPDATED",function(){b.run()}),b.initUpsaleProduct()},run:function(){var a=this;a.$el.length&&a.initContent()},initUpsaleProduct:function(){var a=this;a.upsale=new f,a.upsale.on("ORDER_UPDATED",function(b){var c=a.upsale.get("selected_variant_id"),d=$('.cart__offer-item:has([data-product-link="'+c+'"])');d.remove(),a.order.items.trigger("ORDER_UPDATED",b)})},addUpsaleProduct:function(a){var b=this,c=$(a.currentTarget);return b.upsale.clear().set("selected_variant_id",c.data("product-link")).save(),!1}})},{"../models/product.js":50,"./cart_base.js":10,"./paymentcart_item.js":23}],23:[function(a,b,c){"use strict";var d=a("./cart_item_base.js");b.exports=d.extend({tagName:"tr",template:Templates.cart__itempayment,className:"cart__item"})},{"./cart_item_base.js":12}],24:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({user:null,phoneInput:null,pinInput:null,submitBtn:null,initialize:function(a){var b=this;b.user=a.user},listen:function(a,b,c){var d=this;d.phoneInput&&d.phoneInput.off("input"),d.phoneInput=a,d.phoneInput.on("input",function(a){d.enablePinButton(a)}),d.pinInput&&d.pinInput.off("input"),d.pinInput=b,d.pinInput.on("input",function(a){d.checkPin(a)}),d.submitBtn&&d.submitBtn.off("click"),d.submitBtn=c,d.submitBtn.on("click",function(a){return d.sendPin(a),!1}),d.user.pin.off("PIN_SENT PIN_VERIFIED error").on("PIN_SENT",function(){d.activatePinInput()}).on("PIN_VERIFIED",function(){d.pinVerified()}).on("error",function(a){d.pinVerificationError(a)})},enablePinButton:function(){var a=this;a.submitBtn.removeAttr("disabled"),a.user.pin.clear()},sendPin:function(){var a=this;return a.user.pin.sendPin(a.phoneInput.val()),!1},checkPin:function(){var a=this,b=a.pinInput.val();a.pinInput.parent().removeClass("form-group__field--failed"),b.length>=parseInt(a.pinInput.attr("maxlength"))&&!a.user.pin.verified&&a.user.pin.validatePin(b)},activatePinInput:function(){var a=this;a.submitBtn.attr("disabled","disabled"),a.pinInput.val("").removeAttr("disabled readonly").focus()},pinVerified:function(){var a=this;a.pinInput.attr("readonly","readonly").parent().addClass("form-group__field--verified").removeClass("form-group__field--failed")},pinVerificationError:function(){var a=this;a.pinInput.val("").parent().addClass("form-group__field--failed").removeClass("form-group__field--verified")}})},{}],25:[function(a,b,c){"use strict";var d=a("./popup_login.js"),e=a("./popup_register.js"),f=a("./popup_forgot.js"),g=a("./popup_product.js"),h=a("./popup_ordertype.js"),i=a("./popup_order.js");b.exports=Backbone.View.extend({el:"#popup",$content:null,opened:!1,user:null,options:null,login:null,register:null,forgot:null,product:null,ordertype:null,order:null,initialize:function(a){var b=this;b.user=a.user,b.$el.length&&b.initPopup()},initPopup:function(){var a=this;a.$content=a.$("#popup-content"),a.initLogin(),a.initRegister(),a.initForgot(),a.initProduct(),a.initOrderType(),a.initOrder(),a.$el.on("CLOSED_TOGGLE",function(){a.close()})},render:function(a){var b=this;return b.$content.html(a),b},open:function(a,b,c){var d=this;if("undefined"!=typeof Templates["popup__"+a]){var e=Templates["popup__"+a];d.options=c,d.openPopup(a,e,b,c),d.$el.is(":hidden")&&d.runClose()}else console.log("Template popup/"+a+" not found.")},openPopup:function(a,b,c,d){var e=this;return"undefined"==typeof e[a]?!1:(e.render(e[a].render(b,c).el),e[a].open(d),General.initialize(e.$content),e.opened=!0,e[a])},close:function(){var a=this;a.login.close(),a.register.close(),a.forgot.close(),a.ordertype.close(),a.options=null,a.opened=!1,a.trigger("CLOSED")},runClose:function(){var a=this;General.runToggle("popup-open",a.$el)},initProduct:function(){var a=this;a.product=new g({user:a.user}),a.product.on("ORDER_UPDATED",function(){a.runClose(),a.options&&"function"==typeof a.options.success&&a.options.success()})},initLogin:function(){var a=this;a.login=new d({user:a.user}),a.login.on("LOGIN_FACEBOOK",function(){a.trigger("LOGIN_FACEBOOK")}).on("FORGOT_PASSWORD",function(){a.open("forgot",a.user,a.options)}).on("CREATE_ACCOUNT",function(){a.user.set({accessToken:null,userID:null,facebook:!1}),a.open("register",a.user,a.options)}).on("LOGIN_FORM",function(b){a.trigger("LOGIN_FORM",b)})},loginFailed:function(){var a=this;a.login.failed()},initRegister:function(){var a=this;a.register=new e({user:a.user}),a.register.on("GO_BACK",function(){a.open("login",a.user,a.options)}).on("REGISTRATION_COMPLETED",function(){a.options&&"function"==typeof a.options.success&&a.options.success()})},initForgot:function(){var a=this;a.forgot=new f({user:a.user}),a.forgot.on("GO_BACK",function(){a.open("login",a.user,a.options)}).on("PASSWORD_RESET",function(){a.options&&"function"==typeof a.options.success&&a.options.success()})},initOrderType:function(){var a=this;a.ordertype=new h({user:a.user}),a.user.order.ordertype.on("ORDERTYPE_VERIFIED",function(){a.options&&"function"==typeof a.options.success&&a.options.success()}),a.ordertype.on("SUBMIT_ORDERTYPE",function(b){a.user.order.ordertype.clear().save(b)})},initOrder:function(){var a=this;a.order=new i({user:a.user})}})},{"./popup_forgot.js":27,"./popup_login.js":28,"./popup_order.js":29,"./popup_ordertype.js":30,"./popup_product.js":33,"./popup_register.js":34}],26:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({user:null,options:null,model:null,template:null,events:{"click #popup-back":"goBack"},initialize:function(a){var b=this;b.user=a.user},open:function(a){var b=this;a&&(b.options=a),b.delegateEvents()},close:function(){var a=this;a.options=null,a.undelegateEvents()},render:function(a,b){var c=this,d=null;return"undefined"!=typeof c.model&&(c.model=b,c.model&&(d=c.model.toJSON())),c.template=a,c.$el.html(a(d)),c},goBack:function(){var a=this;return a.trigger("GO_BACK"),!1}})},{}],27:[function(a,b,c){"use strict";var d=a("./popup_user_base.js");b.exports=d.extend({events:function(){var a=d.prototype.events;return _.isFunction(a)&&(a=a()),_.extend({},a,{"submit form":"submitForm"})},render:function(a,b){var c=this,e=d.prototype.render.call(c,a,b);return c.validator.listen(c.$("#phone"),c.$("#pin"),c.$("#send-pin")),e},open:function(a){var b=this;d.prototype.open.call(b,a),b.user.pin.check=204,b.user.pin.clear().on("PIN_VERIFIED",function(){b.$("#password").focus()}).on("USER_DOES_NOT_EXSIST",function(){console.log("USER_DOES_NOT_EXSIST")}),b.user.on("PASSWORD_RESET",function(){b.trigger("PASSWORD_RESET")})},submitForm:function(){var a=this;return a.user.resetPassword(a.$("form").serializeObject()),!1}})},{"./popup_user_base.js":35}],28:[function(a,b,c){"use strict";var d=a("./popup_user_base.js");b.exports=d.extend({events:{"click #fb-btn":"loginFacebook","submit form":"loginForm","click #forgot-btn":"forgotPassword","click #create-btn":"createAccount"},failed:function(){var a=this;a.$('[name="password"]').val("")},loginFacebook:function(){var a=this;return a.trigger("LOGIN_FACEBOOK"),!1},loginForm:function(){var a=this;return a.trigger("LOGIN_FORM",a.$("form").serializeObject()),!1},forgotPassword:function(){var a=this;return a.trigger("FORGOT_PASSWORD"),!1},createAccount:function(){var a=this;return a.trigger("CREATE_ACCOUNT"),!1}})},{"./popup_user_base.js":35}],29:[function(a,b,c){"use strict";var d=a("./popup_base.js");b.exports=d.extend({events:function(){var a=d.prototype.events;return _.isFunction(a)&&(a=a()),_.extend({},a,{})}})},{"./popup_base.js":26}],30:[function(a,b,c){"use strict";var d=a("./popup_base.js"),e=a("./addressfinder.js"),f=a("./restaurantfinder.js"),g=a("./restaurantfinder_item.js"),h=a("../models/restaurant.js"),i=a("./popup_ordertype_takeaway.js"),j=a("./popup_ordertype_delivery.js");b.exports=d.extend({homeAddressFinder:null,workAddressFinder:null,otherAddressFinder:null,restaurantFinder:null,latestRestaurant:null,takeaway:null,delivery:null,events:function(){var a=d.prototype.events;return _.isFunction(a)&&(a=a()),_.extend({},a,{"submit form":"submitForm"})},initialize:function(a){var b=this;d.prototype.initialize.call(b,a),b.restaurantFinder=new f,b.restaurantFinder.on("FOUND_NEARBY",function(){b.insertRetaurantSuggestion(b.restaurantFinder.restaurants.at(0))}),b.takeaway=new i({collection:b.restaurantFinder.restaurants}),b.takeaway.on("GO_BACK",function(){b.reset()}).on("SELECTED_RESTAURANT",function(a){b.$('[name="restaurant"]').val(a),b.submitForm()}),b.delivery=new j,b.delivery.on("GO_BACK",function(){b.reset()}).on("DELIVERY_CONFIRMED",function(){b.$('[name="confirmed"]').val("true"),b.submitForm()}),b.user.on("sync",function(){b.checkLatestRestaurant()}),b.checkLatestRestaurant()},render:function(a,b){var c=this;return d.prototype.render.call(c,a,b),c.initAddressFinders(),c},initAddressFinders:function(){var a=this;a.homeAddressFinder=new e({input:a.$("#home-address")}),a.homeAddressFinder.on("ADDRESS_CHOSEN",function(b){a.$('[name="addresses[home][address]"]').val(b.get("address")),a.$('[name="addresses[home][postCode]"]').val(b.get("postCode")),a.$('[name="addresses[home][postOffice]"]').val(b.get("postOffice")),a.$('[name="addresses[home][directions]"]').focus()}),a.workAddressFinder=new e({input:a.$("#work-address")}),a.workAddressFinder.on("ADDRESS_CHOSEN",function(b){a.$('[name="addresses[work][address]"]').val(b.get("address")),a.$('[name="addresses[work][postCode]"]').val(b.get("postCode")),a.$('[name="addresses[work][postOffice]"]').val(b.get("postOffice")),a.$('[name="addresses[work][directions]"]').focus()}),a.otherAddressFinder=new e({input:a.$("#other-address")}),a.otherAddressFinder.on("ADDRESS_CHOSEN",function(b){a.$('[name="addresses[other][address]"]').val(b.get("address")),a.$('[name="addresses[other][postCode]"]').val(b.get("postCode")),a.$('[name="addresses[other][postOffice]"]').val(b.get("postOffice")),a.$('[name="addresses[other][directions]"]').focus()})},open:function(a){var b=this;d.prototype.open.call(b,a),b.$(".dropdown").on("OPENED_EXPANDED",function(){var a=$(this);a.find("fieldset").removeAttr("disabled")}).on("CLOSED_EXPANDED",function(){var a=$(this);a.find("fieldset").attr("disabled","disabled")}),b.$el.after(b.takeaway.$el),b.$el.after(b.delivery.$el),b.latestRestaurant?b.insertRetaurantSuggestion(b.latestRestaurant):b.restaurantFinder.checkNearby(),b.homeAddressFinder.open(),b.workAddressFinder.open(),b.otherAddressFinder.open(),b.takeaway.open(),b.delivery.open(),b.reset()},checkLatestRestaurant:function(){var a=this,b=a.user.get("lastUsedTakeawayRestaurant");b&&(a.latestRestaurant=new h(b))},insertRetaurantSuggestion:function(a){var b=this,c=new g({model:a});c.on("FOCUSED_RESTAURANT",function(a){b.$('[name="restaurant"]').val(a.get("id"))}).on("BLURRED_RESTAURANT",function(){b.$('[name="restaurant"]').val("")}),b.$("#restaurants-init-closest").prepend(c.render().el).removeClass("hidden"),c.focus(),b.$('[name="position"]').on("focus",function(){c.blur()})},close:function(){var a=this;d.prototype.close.call(a),a.homeAddressFinder&&a.homeAddressFinder.close(),a.workAddressFinder&&a.workAddressFinder.close(),a.otherAddressFinder&&a.otherAddressFinder.close(),a.$(".dropdown").off("OPENED_EXPANDED CLOSED_EXPANDED")},reset:function(){var a=this;a.$el.show(),a.takeaway.$el.hide(),a.delivery.$el.hide()},clickedTab:function(a){var b=this;a.preventDefaults(),a.stopPropagation(),b.focusedTab(a)},focusedTab:function(a){var b=$(a.currentTarget),c=$(b.data("expand"));c.hasClass("closed")&&b.trigger("click")},openTakeaway:function(){var a=this;a.$el.hide(),a.takeaway.$el.show()},openDelivery:function(a){var b=this;b.$el.hide(),b.delivery.model=a,b.delivery.render(),b.delivery.$el.show()},submitForm:function(){var a=this,b=a.$("form").serializeObject();if("DELIVERY"===b.type){var c=b.addressType.toLowerCase();b.address=b.addresses[c].address,b.postCode=b.addresses[c].postCode,b.postOffice=b.addresses[c].postOffice,b.directions=b.addresses[c].directions,delete b.addresses}return"TAKEAWAY"!==b.type||b.restaurant&&""!==b.restaurant?"DELIVERY"===b.type&&"true"!==b.confirmed?a.restaurantFinder.search(b.address+" "+b.postCode,function(){console.log("FOUND_CLOSEST_SUGGESTION",a.restaurantFinder.restaurants.length),a.restaurantFinder.restaurants.length&&a.openDelivery(a.restaurantFinder.restaurants.at(0))}):(a.$('[name="confirmed"]').val("false"),a.trigger("SUBMIT_ORDERTYPE",b)):a.restaurantFinder.search(b.position,function(){console.log("FOUND_SEARCH",a.restaurantFinder.restaurants.models),a.openTakeaway()}),!1}})},{"../models/restaurant.js":52,"./addressfinder.js":7,"./popup_base.js":26,"./popup_ordertype_delivery.js":31,"./popup_ordertype_takeaway.js":32,"./restaurantfinder.js":37,"./restaurantfinder_item.js":38}],31:[function(a,b,c){"use strict";var d=a("./popup_base.js"),e=a("./restaurantfinder_item.js");b.exports=d.extend({restaurant:null,template:Templates.popup__delivery,events:function(){var a=d.prototype.events;return _.isFunction(a)&&(a=a()),_.extend({},a,{"submit form":"submitForm"})},initialize:function(){var a=this;a.$el.hide()},render:function(){var a=this;return a.$el.html(a.template(a.model.toJSON())),a.renderRestaurant(),a.delegateEvents(),a},open:function(){var a=this;a.delegateEvents()},renderRestaurant:function(){var a=this;a.restaurant=new e({model:a.model}),a.$("#restaurant-suggestion").html(a.restaurant.render().el),a.restaurant.focus()},submitForm:function(){var a=this;return a.trigger("DELIVERY_CONFIRMED"),!1}})},{"./popup_base.js":26,"./restaurantfinder_item.js":38}],32:[function(a,b,c){"use strict";var d=a("./popup_base.js"),e=a("./restaurantfinder_item.js");b.exports=d.extend({restaurants:null,template:Templates.popup__takeaway,events:function(){var a=d.prototype.events;return _.isFunction(a)&&(a=a()),_.extend({},a,{"submit form":"submitForm"})},initialize:function(a){var b=this;d.prototype.initialize.call(b,a),b.$el.hide(),b.collection.on("sync",function(){b.render()})},render:function(){var a=this;return a.$el.html(a.template()),a.renderItems(),General.initialize(a.$el),a.delegateEvents(),a},open:function(){var a=this;a.delegateEvents()},close:function(){var a=this;for(var b in a.restaurants)a.restaurants[b].off("FOCUSED_RESTAURANT"),a.restaurants[b].remove();a.restaurants=[],d.prototype.close.call(a)},renderItems:function(){var a=this;a.restaurants=[],a.collection.each(function(b,c){var d=new e({model:b});d.on("FOCUSED_RESTAURANT",function(b){for(var c in a.restaurants)a.restaurants[c]!==this&&a.restaurants[c].blur();a.selectRestaurant(b)}),a.restaurants.push(d),0===c?(a.$("#restaurants-closest").append(d.render().el),setTimeout(function(){d.focus()},100)):a.$("#restaurants-rest-content").append(d.render().el)}),a.collection.length>1?a.$("#restaurants-rest").removeClass("hidden"):a.$("#restaurants-rest").addClass("hidden")},selectRestaurant:function(a){var b=this;b.$('[name="restaurant"]').val(a.get("id"))},submitForm:function(){var a=this,b=a.$("form").serializeObject();return a.trigger("SELECTED_RESTAURANT",b.restaurant),!1}})},{"./popup_base.js":26,"./restaurantfinder_item.js":38}],33:[function(a,b,c){"use strict";var d=a("./product_base.js");b.exports=d.extend({events:function(){var a=d.prototype.events;return _.isFunction(a)&&(a=a()),_.extend({},a,{})},open:function(a){var b=this;d.prototype.open.call(b,a),b.changeVariant(),b.changeQuantity(),b.setAmount(),b.model.off("change:variant").on("change:variant",function(){b.model.set("base",b.model.toJSON()),b.checkCustomizable()}).on("ORDER_UPDATED",function(a){b.trigger("ORDER_UPDATED",a)}),b.model.set("base",b.model.toJSON()),b.checkCustomizable()},checkCustomizable:function(){var a,b,c=this,d=c.model.get("variant");d?(a=d.customizable,b=d.num_free_ingredients):(a=c.model.get("customizable"),b=c.model.get("num_free_ingredients")),a&&"false"!==a?c.$("#customize-btn").removeClass("hidden"):c.$("#customize-btn").addClass("hidden"),b&&b>0?c.$("#add-to-cart-btn").addClass("hidden"):c.$("#add-to-cart-btn").removeClass("hidden")}})},{"./product_base.js":36}],34:[function(a,b,c){"use strict";var d=a("./popup_user_base.js");b.exports=d.extend({events:function(){var a=d.prototype.events;return _.isFunction(a)&&(a=a()),_.extend({},a,{"submit form":"submitForm"})},render:function(a,b){var c=this,e=d.prototype.render.call(c,a,b);return c.validator.listen(c.$("#phone"),c.$("#pin"),c.$("#send-pin")),e},open:function(a){var b=this;d.prototype.open.call(b,a),b.user.get("facebook")?b.user.pin.check=0:b.user.pin.check=205,b.user.pin.clear().on("PIN_VERIFIED",function(){b.$("#firstname").focus()}).on("USER_EXSISTS",function(){console.log("USER_EXSISTS")}),b.user.on("REGISTRATION_COMPLETED",function(){b.trigger("REGISTRATION_COMPLETED")})},submitForm:function(){var a=this;return a.user.register(a.$("form").serializeObject()),!1}})},{"./popup_user_base.js":35}],35:[function(a,b,c){"use strict";var d=a("./popup_base.js"),e=a("./pin_validator.js");b.exports=d.extend({validator:null,initialize:function(a){var b=this;b.validator=new e({user:a.user}),d.prototype.initialize.call(b,a)},open:function(a){var b=this;d.prototype.open.call(b,a),b.user&&(b.user.on("LOGIN_COMPLETED",function(){b.options&&"function"==typeof b.options.success&&b.options.success()}),b.user.pin.on("PIN_VERIFIED",function(){b.$("[disabled]:not(#send-pin)").removeAttr("disabled")}))},close:function(){var a=this;d.prototype.close.call(a),a.user&&(a.user.off("LOGIN_COMPLETED"),a.user.pin.off("PIN_SENT PIN_VERIFIED USER_DOES_NOT_EXSIST USER_EXSISTS"))}})},{"./pin_validator.js":24,"./popup_base.js":26}],36:[function(a,b,c){"use strict";var d=a("./popup_base.js");b.exports=d.extend({events:function(){var a=d.prototype.events;return _.isFunction(a)&&(a=a()),_.extend({},a,{"change #cooking":"changeCookingOptions","change #variants":"changeVariant","input #quantity":"changeQuantity","submit form":"submitForm"})},initialize:function(a){var b=this;d.prototype.initialize.call(b,a)},open:function(a){var b=this;d.prototype.open.call(b,a),b.rewriteVariants()},submitForm:function(){var a=this;return a.model.off("ORDER_UPDATED").on("ORDER_UPDATED",function(b){a.user.order.items.contains(a.model)||a.user.order.items.trigger("ORDER_UPDATED",b)}),a.model.save(),!1},rewriteVariants:function(){var a=this;a.$("#variants").html(""),a.model.variants.each(function(b){var c=$("<option>");c.val(b.get("id")).html(b.get("name")).attr("data-subtext",b.get("description")),b.get("id")===a.model.get("selected_variant_id")&&c.attr("selected","selected"),a.$("#variants").append(c)}),a.$("#variants").trigger("change")},rewriteInfo:function(){var a=this;a.$("#product-image").html(a.model.get("image")),a.$("#product-name").html(a.model.get("name")),a.$("#product-info").html(a.infoTemplate(a.model.toJSON()))},rewriteCookingOptions:function(){var a=this;if(a.model.selectedVariant){var b=a.model.selectedVariant.get("cooking_options");a.$("#cooking").html("");for(var c in b){var d=$("<option>").val(b[c].key).html(b[c].value);b[c].key===a.model.get("selected_cooking_option")&&d.attr("selected","selected"),a.$("#cooking").append(d)}a.$("#cooking").trigger("change")}},changeVariant:function(){var a=this,b=a.$("#variants").val();a.model.set("selected_variant_id",b),a.rewriteCookingOptions(),a.setAmount()},changeCookingOptions:function(){var a=this,b=a.$("#cooking").val();a.model.set("selected_cooking_option",b),a.setAmount()},changeQuantity:function(){var a=this,b=parseInt(a.$("#quantity").val());a.model.set("quantity",b),a.setAmount()},setAmount:function(){var a=this;a.$("#product-amount").html(a.model.get("amount"))}})},{"./popup_base.js":26}],37:[function(a,b,c){"use strict";var d=a("../collections/restaurantcollection.js");b.exports=Backbone.View.extend({template:Templates.form__restaurantfinder,restaurants:null,initialize:function(){var a=this;a.restaurants=new d},checkNearby:function(){var a=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){a.restaurants.findByPosition(b.coords.latitude,b.coords.longitude,function(){a.restaurants.length&&a.trigger("FOUND_NEARBY")})})},search:function(a,b){var c=this;c.restaurants.findByString(a,function(){c.restaurants.length&&("function"==typeof b&&b(),c.trigger("FOUND_SEARCH"))})}})},{"../collections/restaurantcollection.js":6}],38:[function(a,b,c){"use strict";b.exports=Backbone.View.extend({template:Templates["form__restaurantfinder-item"],model:null,tagName:"li",className:"restaurant-list__item",events:{click:"focus",focus:"focusedItem"},initialize:function(){var a=this;a.$el.attr("tabindex",0)},render:function(){var a=this;return a.$el.html(a.template(a.model.toJSON())).attr("data-link-block","#"),a.$("a:first").click(function(){a.clickedRestaurant()}),a},clickedRestaurant:function(){var a=this;return a.trigger("CLICKED_RESTAURANT",a.model),!1},focus:function(){var a=this;return setTimeout(function(){a.$el.focus()},100),a.focusedItem(),!1},focusedItem:function(){var a=this;a.$el.addClass("focus"),a.trigger("FOCUSED_RESTAURANT",a.model)},blur:function(){var a=this;a.$el.blur(),a.blurredItem()},blurredItem:function(a){var b=this;b.$el.removeClass("focus"),a||b.trigger("BLURRED_RESTAURANT",b.model)}})},{}],39:[function(a,b,c){"use strict";b.exports=function(){return{$html:null,$window:null,$document:null,scrollTop:0,scrollLimit:30,initialize:function(){var a=this;a.$html=$("html"),a.$window=$(window),a.$document=$(document),a.scrollTop=a.$window.scrollTop()<0?0:a.$window.scrollTop(),a.initFollowers(),a.initScrollButton()},initFollowers:function(){var a=this,b=[];$("[data-follow]").each(function(a,c){var d=$(c);d.data("top",d.offset().top),b.push(d)}),b.length&&a.$document.on("scroll",function(){a.scrollTop=a.$window.scrollTop(),a.scrollTop=a.scrollTop<0?0:a.scrollTop;for(var c in b){var d=b[c],e=d.data("following"),f=d.data("top");f<=a.scrollTop&&!e?(d.addClass("following"),d.data("following",!0)):f>a.scrollTop&&e&&(d.removeClass("following"),d.data("following",!1))}}).trigger("scroll")},initScrollButton:function(){var a,b,c=this,d=2e3,e=$("#scrollToTop"),f=!1;$(document).on("touchstart",function(b){a=b.originalEvent.targetTouches[0].clientY}).on("touchmove",function(g){var h=a-g.originalEvent.targetTouches[0].clientY;b&&(clearTimeout(b),b=null),b=setTimeout(function(){e.removeClass("visible"),f=!1},d),h>5||c.scrollTop<=200?(e.removeClass("visible"),f=!1):-5>h&&c.scrollTop>200&&(e.addClass("visible"),f=!0)}),e.on("click",function(){e.removeClass("visible"),$("html:not(:animated),body:not(:animated)").animate({scrollTop:0},500)})}}}},{}],40:[function(a,b,c){"use strict";var d=a("./cart_base.js"),e=a("./sidecart_item.js");b.exports=d.extend({el:"#sidecart",itemClass:e,itemHolder:"#sidecart-items",amountText:"#sidecart-amount",items:{},events:function(){var a=d.prototype.events;return _.isFunction(a)&&(a=a()),_.extend({},a,{"click #change-delivery":"changeDelivery"})},initialize:function(a){var b=this;b.order=a.order,b.initCartBtn()},initCartBtn:function(){var a=this;$("#header-cart").click(function(){return a.trigger("OPEN_CART"),!1}),a.order.on("ORDER_UPDATED",function(){a.updateCartBtn()}),a.updateCartBtn()},updateCartBtn:function(){var a=this,b=0;a.order.items.each(function(a){var c=a.get("quantity");c&&(b+=c)}),$("#header-cart .header-cart__items").html(b)},open:function(){var a=this;a.initContent(),General.runToggle("cart-open",a.$el)},close:function(){var a=this;a.removeContent(),console.log("CLOSE_CART")},changeDelivery:function(){var a=this;return a.trigger("CHANGE_DELIVERY"),!1}})},{"./cart_base.js":10,"./sidecart_item.js":41}],41:[function(a,b,c){"use strict";var d=a("./cart_item_base.js");b.exports=d.extend({template:Templates.cart__item,className:"cart__item"})},{"./cart_item_base.js":12}],42:[function(a,b,c){"use strict";b.exports={initialize:function(a){var b=this;b.initLinkBlock(a),b.initToggle(a),b.initToggleOpen(a),b.initDropdowns(a),b.initExpand(a),b.initCheckRadioStyle(a),b.initSelectStyle(a),b.initClamp(a),b.initQuantityPickers(a),b.initRadioOpen(a),b.initCustomSelect(a),b.initSelectOpen(a),b.initGrid(a),b.initClearFields(a)},getTarget:function(a,b){return"undefined"!=typeof a&&a?a.is(b)?a:a.find(b):$(b)},initLinkBlock:function(a){var b=this;b.getTarget(a,"[data-link-block]").off("click").on("click",function(a){var b=$(this).data("link-block"),c=$(this).find("a:first");return b&&""!==b&&"#"!==b||(b=c.attr("href")),""===b||"#"===b.charAt(0)?c.get(0)!==a.target&&(c.trigger("click"),a.stopPropagation()):window.location.href=b,!1})},initToggle:function(a){var b=this;b.getTarget(a,"[data-toggle]").off("click").on("click",function(){var a=$(this),c=a.data("toggle-hidden"),d=c?$(c):null;return b.runToggle(a.data("toggle"),d),!1})},runToggle:function(a,b){b?b.hasClass("hidden")?(b.removeClass("hidden").trigger("OPENED_TOGGLE"),setTimeout(function(){$("html").toggleClass(a)},50)):($("html").toggleClass(a),setTimeout(function(){b.addClass("hidden").trigger("CLOSED_TOGGLE")},300)):$("html").toggleClass(a)},initToggleOpen:function(a){var b=this;b.getTarget(a,"[data-toggle-open]").off("click").on("click",function(){var a=$($(this).data("toggle-open"));return a.length&&(a.toggleClass("open"),a.hasClass("open")?($(this).addClass("open"),a.trigger("OPENED")):($(this).removeClass("open"),a.trigger("CLOSED"))),!1})},initDropdowns:function(a){var b=this,c=b.getTarget(a,"[data-toggle-dropdown]");c.each(function(a,b){var c=$(b).data("toggle-dropdown");c&&$(c).addClass("closed")}),c.on("click",function(a){var c,d=$(this),e=d.data("toggle-dropdown");return e&&(c=$(e)),c&&c.length?(a.preventDefault(),a.stopPropagation(),b.toggleDropdown(c),!1):void 0})},toggleDropdown:function(a){var b=this;a.toggleClass("closed"),a.hasClass("closed")?$(document).off("click"):($(document).on("click",function(){b.toggleDropdown(a),$(document).off("click"),a.trigger("CLOSED_DROPDOWN")}),a.trigger("OPENED_DROPDOWN"))},initExpand:function(a){var b=this,c=b.getTarget(a,"[data-expand]");c.data("ddTimeout",null).on("click",function(a){var b,c,d=$(this),e=d.data("expand"),f=d.data("collapse");if(e&&(b=$(e)),f&&(c=$(f)),b&&b.length){a.preventDefault();var g=b.data("ddTimeout"),h="-webkit-transition-property:none !important; -webkit-transition-duration:0 !important;",i=h+"height:auto !important;";b.attr("style",i);var j="height: "+b.outerHeight()+"px;";return b.attr("style",h+j),setTimeout(function(){b.attr("style",j),b.toggleClass("closed"),b.hasClass("closed")?b.trigger("CLOSED_EXPANDED"):(g&&(clearTimeout(g),g=null),g=setTimeout(function(){b.attr("style",i),g=null},270),b.trigger("OPENED_EXPANDED"),c&&c.each(function(a,b){var c=$(b);c.hasClass("closed")||$('[data-expand="#'+c.attr("id")+'"]').trigger("click")}))},30),d.toggleClass("is-open"),!1}}),c.each(function(a,b){var c=$(b);c.is("[data-expand-onload]")&&setTimeout(function(){c.trigger("click")},50)})},initCheckRadioStyle:function(a){var b=this;b.getTarget(a,'input[type="radio"],input[type="checkbox"]').checkboxRadioUI({label:!1})},initSelectStyle:function(a){var b=this;b.getTarget(a,".form-group select:not([data-disable-custom],:has([data-subtext],[data-content]))").customSelect({customClass:"form-group__select"})},initClamp:function(a){var b=this,c=b.getTarget(a,"[data-clamp]");$.each(c,function(a,b){$(b).text()&&$clamp($(b).get(0),{clamp:parseInt($(b).data("clamp"))})})},initQuantityPickers:function(a){var b=this;b.getTarget(a,".quantity-picker").each(function(a,b){var c=$(b),d=c.find("input");c.find(".quantity-picker__controller--minus").click(function(a){a.preventDefault();var b=parseInt(d.val());b>0&&d.val(b-1).trigger("input")}),c.find(".quantity-picker__controller--plus").click(function(a){a.preventDefault();var b=parseInt(d.val());d.val(b+1).trigger("input")}),c.find(".quantity-picker__controller--remove").click(function(a){a.preventDefault(),d.trigger("REMOVE")}),d.on("input",function(){var a=parseInt(d.val());a>1?c.removeClass("quantity-picker--removable"):c.addClass("quantity-picker--removable")}).trigger("input")})},initRadioOpen:function(a){var b=this;b.getTarget(a,"[data-radio-open]").each(function(a,b){var c=$(b),d=$(c.data("radio-open"));d.length&&(c.is(":checked")||d.addClass("hidden"),c.on("change",function(){c.is(":checked")?(d.removeClass("hidden"),"radio"===c.attr("type").toLowerCase()&&$($('[name="'+c.attr("name")+'"]').not(c).data("radio-open")).addClass("hidden")):d.addClass("hidden")}).trigger("change"))})},initCustomSelect:function(a){var b=this;b.getTarget(a,"select:has([data-subtext],[data-content])").each(function(a,b){var c=$(b);c.selectpicker()})},initSelectOpen:function(a){var b=this;b.getTarget(a,"select[data-select-open]").each(function(a,b){var c=$(b);c.on("change",function(){c.find("[data-select-open-target]").each(function(a,b){var c=$(b),d=$(c.data("select-open-target"));c.is(":checked")?d.removeClass("hidden"):d.addClass("hidden")})}).trigger("change")})},initGrid:function(a){var b=this;b.getTarget(a,"[data-grid]").masonry({itemSelector:".grid__elm",transitionDuration:0,columnWidth:300});var c=b.getTarget(a,"[data-large-grid-style]");if(c.length){var d=$('<style type="text/css">').html("@media (min-width: 600px) {");c.each(function(a,b){var c=$(b),e=c.attr("id");e||(e="grid"+Math.round(1e7*Math.random()),c.attr("id",e));var f="#"+e+"{"+c.data("large-grid-style").split(";").join(" !important;")+"}";d.append(f)}),d.append("}").appendTo("head")}},initClearFields:function(a){var b=this;b.getTarget(a,"[data-clear-fields]").click(function(){var a=$(this),b=$(a.data("clear-fields"));return console.log("clear fields",b),b.length,!1})}}},{}],43:[function(a,b,c){"use strict";var d=a("./helpers/general.js"),e=a("./models/user.js"),f=a("./models/product.js"),g=a("./models/restaurant.js"),h=a("./controllers/scroll.js"),i=a("./controllers/header.js"),j=a("./controllers/popup.js"),k=a("./controllers/facebook.js"),l=a("./controllers/sidecart.js"),m=a("./controllers/menu.js"),n=a("./controllers/cart.js"),o=a("./controllers/paymentcart.js"),p=a("./controllers/customize.js"),q=a("./controllers/payment.js"),r=a("./controllers/myorders.js"),s=a("./controllers/myprofile.js"),t=function(){return{initialize:function(){var a=this;a.initLoginButtons(),window.General=d,d.initialize(),a.initModels(),a.initControllers(),a.checkLogin()},checkLogin:function(){var a=this;a.user.checkLogin(function(){a.facebook.load()})},logIn:function(a){var b=this;b.user.logIn(a)},loggedIn:function(){var a=this;$("html").addClass("logged-in").removeClass("logged-out"),a.payment.fillUserData(a.user.attributes)},initLoginButtons:function(){var a=this;$("[data-require-login]").click(function(b){var c=$(b.currentTarget),d=c.attr("href");a.user.loggedIn?"#"!==d?window.location.href=d:c.trigger("click",b):(b.preventDefault(),b.stopImmediatePropagation(),a.popup.open("login",a.user,{success:function(){a.popup.runClose(),"#"!==d?window.location.href=d:c.trigger("click",b)}}))})},user:null,product:null,initModels:function(){var a=this;a.initUser(),a.initProduct(),a.initRestaurant()},initUser:function(){var a=this;a.user=new e,a.user.on("LOGIN_COMPLETED",function(){a.loggedIn()}).on("LOGIN_FAILED",function(){a.popup.loginFailed()}).on("SHOW_MESSAGES",function(b){console.log("User SHOW_MESSAGES",b),a.showPopupMessages(b)})},initProduct:function(){var a=this;if(""!==window.location.hash&&window.location.hash.length>1){var b=parseInt(window.location.hash.substr(1));isNaN(b)||(a.loadProduct(b),window.location.hash="")}},initRestaurant:function(){var a=this;a.restaurant=new g,a.restaurant.on("SHOW_MESSAGES",function(b){console.log("Restaurant SHOW_MESSAGES",b),a.showPopupMessages(b)}),a.user.order.on("change:restaurant",a.restaurant.fetchOpeningHours,a.restaurant),a.user.order.on("change:restaurant",a.restaurant.fetchRestaurant,a.restaurant)},loadProduct:function(a){var b=this,c=new f;c.on("PRODUCT_LOADED",function(){b.popup.open("product",c,{success:function(){b.sidecart.open()}})}).on("SHOW_MESSAGES",function(a){console.log("Product SHOW_MESSAGES",a),
b.showPopupMessages(a)}),c.load(a)},scroll:null,header:null,popup:null,myOrders:null,facebook:null,sidecart:null,menu:null,cart:null,customize:null,initControllers:function(){var a=this;a.initScroll(),a.initHeader(),a.initPopup(),a.initFacebook(),a.initSideCart(),a.initMenu(),a.initCart(),a.initPaymentCart(),a.initCustomize(),a.initPayment(),a.initMyOrders(),a.initMyProfile()},initScroll:function(){var a=this;a.scroll=new h,a.scroll.initialize()},initHeader:function(){var a=this;a.header=new i({user:a.user})},initPopup:function(){var a=this;a.popup=new j({user:a.user}),a.popup.on("LOGIN_FACEBOOK",function(){a.facebook.logIn(function(b){b&&(a.user.off("LOGIN_FACEBOOK_AUTH").on("LOGIN_FACEBOOK_AUTH",function(){a.facebook.loadInfo(function(b){b&&a.user.set({email:b.email,firstName:b.first_name,lastName:b.last_name}),a.popup.open("register",a.user,a.popup.options)})}),a.logIn(b))})}),a.popup.on("LOGIN_FORM",function(b){a.logIn(b)})},showPopupMessages:function(a){var b=this;b.popup.opened?b.popup.once("CLOSED",function(){console.log("Run delayed popup messages",a)}):console.log("Run popup messages",a)},initFacebook:function(){var a=this;a.facebook=new k},initSideCart:function(){var a=this;a.sidecart=new l({order:a.user.order}),a.sidecart.on("OPEN_CART",function(){a.user.loggedIn?a.sidecart.open():a.popup.open("login",a.user,{success:function(){a.popup.runClose(),setTimeout(function(){a.sidecart.open()},50)}})}).on("CHANGE_DELIVERY",function(){d.runToggle("cart-open",a.sidecart.$el),a.popup.open("ordertype",null,{success:function(){window.location.reload()}})})},initCart:function(){var a=this;a.cart=new n({order:a.user.order})},initPaymentCart:function(){var a=this;a.paymentcart=new o({order:a.user.order})},initMenu:function(){var a=this;a.menu=new m,a.menu.on("OPEN_PRODUCT",function(b){a.user.loggedIn?a.openProduct(b):a.popup.open("login",a.user,{success:function(){a.openProduct(b)}})})},initPayment:function(){var a=this;a.payment=new q,a.payment.on("SEARCH_CORPORATE",a.user.searchCorporate,a.user),a.user.on("CORPORATE_USER_FOUND",a.payment.corporateUserFound,a.payment),a.user.on("CORPORATE_USER_NOT_FOUND",a.payment.corporateUserNotFound,a.payment),a.restaurant.on("CHANGE_AVAILABLE_OPENING_HOURS",a.payment.fillAvailableOpeningHours,a.payment),a.restaurant.on("NO_AVAILABLE_OPENING_HOURS",a.payment.emptyAvailableOpeningHours,a.payment),a.restaurant.on("CHANGE_RESTAURANT",a.payment.changeDeliveryAddress,a.payment),a.payment.setUp()},initMyOrders:function(){var a=this;a.myOrders=new r,a.myOrders.on("OPEN_ORDER",function(b){a.popup.open("order",b)})},initMyProfile:function(){var a=this;a.myProfile=new s({user:a.user})},openProduct:function(a){var b=this;b.user.order.get("type")?b.loadProduct(a):b.popup.open("ordertype",b.user,{success:function(){window.location.hash=a,window.location.reload()}})},initCustomize:function(){var a=this;a.customize=new p({user:a.user})}}};window.App=new t,function(a){a.App.initialize()}(window)},{"./controllers/cart.js":9,"./controllers/customize.js":13,"./controllers/facebook.js":16,"./controllers/header.js":17,"./controllers/menu.js":18,"./controllers/myorders.js":19,"./controllers/myprofile.js":20,"./controllers/payment.js":21,"./controllers/paymentcart.js":22,"./controllers/popup.js":25,"./controllers/scroll.js":39,"./controllers/sidecart.js":40,"./helpers/general.js":42,"./models/product.js":50,"./models/restaurant.js":52,"./models/user.js":54}],44:[function(a,b,c){"use strict";b.exports=Backbone.Model.extend({initialize:function(){var a=this;a.on("sync",function(a,b,c){switch(c.xhr.status){case 203:console.log(c.xhr.status,"Web closed",b.messages);break;case 206:console.log(c.xhr.status,"Show message",b.messages)}}).on("error",function(a,b,c){switch(console.log("model error",c.xhr.status,b.responseJSON),c.xhr.status){case 503:console.log(c.xhr.status,"Web closed",b.responseJSON.messages)}})},parse:function(a){return!a.error&&a.data?a.data:a},deleteAttribute:function(a,b){return a[b]&&delete a[b],a}})},{}],45:[function(a,b,c){"use strict";var d=a("./base.js");b.exports=d.extend({defaults:{extraModel:null},idAttribute:"os_product_id",initialize:function(){var a=this;d.prototype.initialize.call(a),a.on("change:extra",function(){a.checkExtra()}),a.checkExtra()},checkExtra:function(){var a=this,b=a.get("extra"),c=a.get("extraModel");b&&(c?(console.log("extra existed",b),c.set(b)):(c=new d(b),c.on("change",function(){a.set({extra:c.toJSON()},{silent:!0}),a.trigger("change",a)}),a.set({extraModel:c},{silent:!0})))},toJSON:function(){var a=this,b=d.prototype.toJSON.call(a);return b.extraModel&&delete b.extraModel,b}})},{"./base.js":44}],46:[function(a,b,c){"use strict";var d=a("./base.js"),e=a("./product.js"),f=a("../collections/productcollection.js"),g=a("./ordertype.js");b.exports=d.extend({url:function(){var a=this,b=a.get("id");return window.API_PATH_ORDER+(b?"/"+b:"")+".json"},defaults:{amount:0},items:null,ordertype:null,initialize:function(){var a=this;d.prototype.initialize.call(a),a.items=new f,a.items.on("change add remove",function(a){a.save()}).on("ORDER_UPDATED",function(b){a.set(b),a.updateItems(),a.trigger("ORDER_UPDATED")}),a.ordertype=new g,a.ordertype.on("ORDERTYPE_VERIFIED",function(){a.set("type",a.ordertype.toJSON())}),a.on("sync",function(){a.updateItems(),a.trigger("ORDER_UPDATED")}),a.updateItems()},toJSON:function(){var a=this,b=d.prototype.toJSON.call(a);return b.items=a.items.toJSON(),b},add:function(a){var b=this,c=b.items.get(a.get("id"));c?c.set("quantity",c.get("quantity")+a.get("quantity")):b.items.add(a)},remove:function(a){var b=this;b.items.remove(a)},updateItems:function(){var a=this,b=a.get("items"),c=[];for(var d in b){var f=a.items.get(b[d].id);f?f.set(b[d]):f=new e(b[d]),c.push(f)}a.items.reset(c),a.updateAmount()},updateAmount:function(){var a=this,b=0;a.items.each(function(a){var c=a.get("quantity");"undefined"==typeof c&&(c=1),b+=a.get("price")*c}),a.set("amount",b)}})},{"../collections/productcollection.js":4,"./base.js":44,"./ordertype.js":48,"./product.js":50}],47:[function(a,b,c){"use strict";var d=a("./base.js");b.exports=d.extend({defaults:{base:null,extension:null},initialize:function(){var a=this;d.prototype.initialize.call(a),a.on("sync",function(b,c){!c.error&&c.data&&a.trigger("ORDER_UPDATED",c.data)})},url:function(){var a=this,b=a.get("id");return window.API_PATH_ORDERITEM+(b?"/"+b:"")+".json"},save:function(a,b){var c=this;b||(b={}),(c.get("id")||"undefined"!=typeof a&&a.id)&&(b.patch=!0),a=_.extend({},c.clone().toJSON(),a),a=c.deleteGeneralAttributes(a),a=c.deleteAttribute(a,"variant"),a.base&&(a.base=c.deleteSubAttributes(a.base)),a.extension&&(a.extension=c.deleteSubAttributes(a.extension)),c.clear({silent:!0}),d.prototype.save.call(c,a,b)},deleteGeneralAttributes:function(a){var b=this;return a=b.deleteAttribute(a,"description_long"),a=b.deleteAttribute(a,"description_short"),a=b.deleteAttribute(a,"tags"),a=b.deleteAttribute(a,"variants"),a=b.deleteAttribute(a,"removable"),a=b.deleteAttribute(a,"split"),a=b.deleteAttribute(a,"splittable"),a=b.deleteAttribute(a,"selected_variant_id"),a=b.deleteAttribute(a,"url"),a=b.deleteAttribute(a,"customizable")},deleteSubAttributes:function(a){var b=this;return a=b.deleteGeneralAttributes(a),a=b.deleteAttribute(a,"base"),a=b.deleteAttribute(a,"extension"),a=b.deleteAttribute(a,"quantity"),a=b.deleteAttribute(a,"cooking_options"),a.variant&&(a.variant=b.deleteSubAttributes(a.variant)),a}})},{"./base.js":44}],48:[function(a,b,c){"use strict";var d=a("./base.js");b.exports=d.extend({url:window.API_PATH_ORDERTYPE+".json",initialize:function(){var a=this;d.prototype.initialize.call(a),a.on("sync",function(b,c,d){switch(d.xhr.status){case 200:a.verified=!0,a.trigger("ORDERTYPE_VERIFIED");break;default:console.log("synced",b,c,d)}})}})},{"./base.js":44}],49:[function(a,b,c){"use strict";var d=a("./base.js");b.exports=d.extend({verified:!1,check:0,url:window.API_PATH_PIN+".json",initialize:function(){var a=this;d.prototype.initialize.call(a),a.on("sync",function(b,c,d){switch(a.verified=!1,d.xhr.status){case 201:a.trigger("PIN_SENT");break;case 200:a.verified=!0,a.trigger("PIN_VERIFIED");break;case 204:a.trigger("USER_DOES_NOT_EXSIST");break;case 205:a.trigger("USER_EXSISTS");break;default:console.log("synced",b,c,d)}}).on("reset",function(){a.verified=!1})},sendPin:function(a){var b=this;b.set("phone",a),b.save()},validatePin:function(a){var b=this;b.get("id")&&(b.set("pin",a),b.save())},toJSON:function(){var a=this,b=d.prototype.toJSON.call(a);return a.check&&(b.check=a.check),b}})},{"./base.js":44}],50:[function(a,b,c){"use strict";var d=a("./base.js"),e=a("./orderitem.js"),f=a("../collections/productvariantcollection.js"),g=a("./product_variant.js");b.exports=d.extend({variants:null,selectedVariant:null,orderitem:null,defaults:{split:!1,removable:!0,base:null,extension:null},url:function(){var a=this,b=a.get("id"),c=a.get("product_id");return b?window.API_PATH_ORDERITEM+"/"+b+".json":window.API_PATH_PRODUCT+(c?"/"+c:"")+".json"},initialize:function(){var a=this;d.prototype.initialize.call(a),a.types=new Backbone.Collection,a.variants=new f,a.orderitem=new e,a.orderitem.on("ORDER_UPDATED",function(b){a.trigger("ORDER_UPDATED",b)}),a.on("sync",function(b,c,d){switch(a.updateVariants(),d.xhr.status){case 201:break;case 200:a.trigger("PRODUCT_LOADED");break;default:console.log("synced",b,c,d)}}),a.on("change:selected_variant_id change:variants",function(){a.setSelectedVariant(),a.setPrice()}).on("change:price change:quantity",function(){a.setAmount()}),a.variants.on("change",function(){a.updateVariants()}),a.updateVariants(),a.setSelectedVariant()},load:function(a){var b=this;b.clear().set({product_id:a},{silent:!0}).fetch()},updateVariants:function(){var a=this,b=a.get("variants");if(b){for(var c in b){var d=a.variants.get(b[c].id);d||(d=new g(b[c]),a.variants.add(d,{silent:!0})),b[c]=d.toJSON()}a.setSelectedVariant(),a.set({variants:b},{silent:!0}).trigger("change:variants",a)}},setSelectedVariant:function(){var a=this,b=a.get("selected_variant_id");if(a.selectedVariant=a.variants.get(b),a.selectedVariant)a.set("variant",a.selectedVariant.toJSON());else if(b){var c=new g({id:b});a.set("variant",c.toJSON())}},setPrice:function(){var a,b=this,c=b.get("selected_variant_id");if(c){var d=b.variants.get(c);d&&(a=parseInt(d.get("price")))}a||(a=b.get("price")),b.set("price",a)},setAmount:function(){var a=this,b=a.get("quantity"),c=a.get("price");"undefined"!=typeof b?(b=parseInt(b),a.set("quantity",b)):b=1,a.set("amount",c*b),a.set("removable",b&&2>b)},removeUnsplittableVariants:function(){var a=this;a.variants.each(function(b){b.get("splittable")||a.variants.remove(b)});var b=a.get("selected_variant_id"),c=a.variants.get(b);if(!c){var d=a.variants.at(0)?a.variants.at(0).get(g.prototype.idAttribute):null;a.set("selected_variant_id",d)}},removeUncustomizableVariants:function(){var a=this;a.variants.each(function(b){b.get("customizable")||a.variants.remove(b)});var b=a.get("selected_variant_id"),c=a.variants.get(b);if(!c){var d=a.variants.at(0)?a.variants.at(0).get(g.prototype.idAttribute):null;a.set("selected_variant_id",d)}},toJSON:function(){var a=this,b=d.prototype.toJSON.call(a);return b.extension&&(b.split=!0),b=a.deleteAttribute(b,"variants")},setOrderItem:function(){var a=this;a.orderitem.clear().set(a.toJSON()),a.orderitem.get("base")||a.orderitem.set("base",a.toJSON())},save:function(){var a=this;a.setOrderItem(),a.orderitem.save()},destroy:function(a){var b=this;return b.setOrderItem(),b.orderitem.destroy(),Backbone.Model.prototype.destroy.call(b,a)}})},{"../collections/productvariantcollection.js":5,"./base.js":44,"./orderitem.js":47,"./product_variant.js":51}],51:[function(a,b,c){"use strict";var d=a("./base.js"),e=a("./ingredient.js"),f=a("../collections/ingredientcollection.js");b.exports=d.extend({defaults:{ingredients:{categories:[]}},initialize:function(){var a=this;d.prototype.initialize.call(a),a.on("change:ingredients",function(){a.setPrice()}).on("change:variant_id",function(){a.set({id:a.get("variant_id")})}),a.ingredients=new f,a.ingredients.on("change",function(){a.updateIngredients()}),a.updateIngredients()},setPrice:function(){var a,b=this;a=b.get("price");var c=0;b.ingredients.each(function(a){if(a.get("included")){c+=a.get("price");var b=a.get("extraModel");b&&b.get("included")&&(c+=b.get("price"))}}),b.set("price",a),b.set("totalPrice",a+c)},updateIngredients:function(){var a=this,b=a.get("ingredients");for(var c in b.categories)for(var d in b.categories[c].list){var f=b.categories[c].list[d][e.prototype.idAttribute],g=a.ingredients.get(f);g||(g=new e(b.categories[c].list[d]),a.ingredients.add(g,{silent:!0})),b.categories[c].list[d]=g.toJSON()}a.set({ingredients:b},{silent:!0}).trigger("change:ingredients",a)}})},{"../collections/ingredientcollection.js":3,"./base.js":44,"./ingredient.js":45}],52:[function(a,b,c){"use strict";var d=a("./base.js"),e=a("./restaurant/opening_hours.js");b.exports=d.extend({defaults:{name:"",address:"",postCode:"",city:"",isOpenNow:!1,openInfo:""},openingHours:[],url:function(){var a=this;return window.API_PATH_RESTAURANT_SEARCH+"?id="+a.id},initialize:function(){var a=this;d.prototype.initialize.call(a),a.openingHours=new e},fetchOpeningHours:function(a){if(a.get("restaurant")){var b=a.get("restaurant"),c=this;c.openingHours.set("restaurantId",b),c.openingHours.fetch({success:function(a){c.trigger("CHANGE_AVAILABLE_OPENING_HOURS",a.attributes),c.trigger("sync",arguments[0],arguments[1],arguments[2])},error:function(){c.trigger("NO_AVAILABLE_OPENING_HOURS"),c.trigger("error",arguments[0],arguments[1],arguments[2])}})}},fetchRestaurant:function(a){if(a.get("restaurant")){var b=a.get("restaurant"),c=this;c.set("id",b),c.fetch({success:function(){var a=c.attributes[0];c.trigger("CHANGE_RESTAURANT",a.name,a.address),c.trigger("sync",arguments[0],arguments[1],arguments[2])},error:function(){c.trigger("NO_RESTAURANT"),c.trigger("error",arguments[0],arguments[1],arguments[2])}})}}})},{"./base.js":44,"./restaurant/opening_hours.js":53}],53:[function(a,b,c){"use strict";var d=a("../base.js");b.exports=d.extend({defaults:{restaurantId:0},url:function(){var a=this;return window.API_PATH_OPENING_HOURS+"?restaurant_id="+a.get("restaurantId")}})},{"../base.js":44}],54:[function(a,b,c){"use strict";var d=a("./base.js"),e=a("./pin.js"),f=a("./order.js");b.exports=d.extend({loggedIn:!1,pin:null,order:null,url:function(){var a=this,b=a.get("id"),c="";return c=!b&&a.get("phone")&&a.get("password")&&a.get("passwordrepeat")&&!a.get("firstName")&&!a.get("lastName")?window.API_PATH_RESETPASSWORD:b||!a.get("phone")||!a.get("password")||a.get("firstName")||a.get("lastName")?b||!a.get("userID")||!a.get("accessToken")||a.get("firstName")||a.get("lastName")?window.API_PATH_CUSTOMER:window.API_PATH_LOGINFACEBOOK:window.API_PATH_LOGIN,c+".json"},initialize:function(){var a=this;d.prototype.initialize.call(a),a.pin=new e,a.pin.on("PIN_SENT",function(){a.set("phone",a.pin.get("phone"))}),a.pin.on("PIN_VERIFIED",function(){a.set("pin",a.pin.toJSON())}),a.order=new f},checkLogin:function(a){var b=this;b.fetch({success:function(){b.logInCompleted(),"function"==typeof a&&a()},error:function(){b.logInFailed(),"function"==typeof a&&a()}})},logIn:function(a){var b=this;b.clear().save(a,{success:function(a,c,d){switch(b.set({password:null,passwordrepeat:null}),d.xhr.status){case 200:b.logInCompleted();break;case 202:b.facebookAuth()}},error:function(){console.log("login error",arguments[0],arguments[1],arguments[2]),b.set({password:null,passwordrepeat:null}),b.logInFailed()}})},facebookAuth:function(){var a=this;a.loggedIn=!1,a.set("facebook",!0),a.trigger("LOGIN_FACEBOOK_AUTH")},logInCompleted:function(){var a=this;a.loggedIn=!0,a.order.fetch({success:function(){a.trigger("LOGIN_COMPLETED")},error:function(){a.trigger("LOGIN_COMPLETED")}})},logInFailed:function(){var a=this;a.loggedIn=!1,a.trigger("LOGIN_FAILED")},register:function(a){var b=this;b.save(a,{success:function(){b.set({password:null,passwordrepeat:null}),b.trigger("REGISTRATION_COMPLETED")},error:function(){b.set({password:null,passwordrepeat:null})}})},resetPassword:function(a){var b=this;b.clear().save(a,{success:function(){b.set({password:null,passwordrepeat:null}),b.trigger("PASSWORD_RESET")},error:function(){b.set({password:null,passwordrepeat:null})}})},toJSON:function(){var a=this,b=d.prototype.toJSON.call(a);return a.pin&&(b.pin=a.pin.toJSON()),b},searchCorporate:function(a){var b=this,c=window.API_PATH+"/business.json";$.ajax({url:c,dataType:"json",data:{query:a},success:function(a){b.trigger("CORPORATE_USER_FOUND",a.data)},error:function(a){b.trigger("CORPORATE_USER_NOT_FOUND",a)}})}})},{"./base.js":44,"./order.js":46,"./pin.js":49}]},{},[43]);